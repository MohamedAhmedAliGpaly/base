(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70f63fc0"],{"2cb5":function(t,e,a){},a39b:function(t,e,a){"use strict";var i=a("2cb5"),s=a.n(i);s.a},a6e8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Action",{attrs:{url:"SysMenus"},on:{action:t.openAction}}),a("el-row",{staticClass:"body"},[a("div",{staticClass:"body_tree"},[a("el-row",{staticStyle:{"max-width":"240px"}},[a("el-input",{attrs:{placeholder:"搜索菜单名称"},model:{value:t.getSelect,callback:function(e){t.getSelect=e},expression:"getSelect"}})],1),a("div",{staticClass:"flex tree_node_title"},[a("div",[t._v("菜单名称")]),a("div",{staticClass:"flex"},[a("dd",{staticStyle:{width:"120px"}},[t._v("控制器")]),a("dd",{staticStyle:{width:"160px"}},[t._v("图标")]),a("dd",{staticStyle:{width:"30px"}},[t._v("权限")]),a("dd",{staticStyle:{width:"30px"}},[t._v("排序")]),a("dd",{staticStyle:{width:"60px"}},[t._v("操作")]),a("dd",{staticStyle:{width:"90px"}},[t._v("更新日期")])])]),a("el-tree",{ref:"tree",attrs:{data:t.listData.list,"show-checkbox":"","node-key":"id","filter-node-method":t.subSea},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,s=e.data;return a("span",{staticClass:"tree_node"},[a("span",[t._v(t._s(i.label))]),a("div",{staticClass:"flex tree_node_width"},[a("dd",{staticStyle:{width:"120px"}},[t._v(t._s(s.url))]),a("dd",{staticStyle:{width:"160px"}},[t._v(t._s(s.ico))]),a("dd",{staticStyle:{width:"30px"}},[t._v(t._s(s.perm))]),a("dd",{staticStyle:{width:"30px"}},[t._v(t._s(s.sort))]),a("dd",{staticStyle:{width:"60px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.showEdit(s)}}},[t._v("编辑")])],1),a("dd",{staticStyle:{width:"90px"}},[t._v(t._s(s.utime?s.utime.substr(0,10):"空"))])])])}}])})],1)]),a("el-dialog",{attrs:{title:"添加",visible:t.addData.show,center:"",width:"680px",top:"20vh"},on:{"update:visible":function(e){return t.$set(t.addData,"show",e)}}},[a("el-form",{attrs:{model:t.addData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"归属"}},[a("el-cascader",{staticStyle:{width:"100%","max-width":"360px"},attrs:{options:t.fidClass,"change-on-select":"",filterable:"",clearable:"","expand-trigger":"hover",placeholder:"默认顶级菜单"},model:{value:t.addData.form.fid,callback:function(e){t.$set(t.addData.form,"fid",e)},expression:"addData.form.fid"}})],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"菜单名称"},model:{value:t.addData.form.title,callback:function(e){t.$set(t.addData.form,"title",e)},expression:"addData.form.title"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"链接地址"},model:{value:t.addData.form.url,callback:function(e){t.$set(t.addData.form,"url",e)},expression:"addData.form.url"}})],1),a("el-form-item",{attrs:{label:"图标样式"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"图标样式"},model:{value:t.addData.form.ico,callback:function(e){t.$set(t.addData.form,"ico",e)},expression:"addData.form.ico"}})],1),a("el-form-item",{attrs:{label:"权限值"}},[a("el-checkbox-group",{model:{value:t.addData.form.permArr,callback:function(e){t.$set(t.addData.form,"permArr",e)},expression:"addData.form.permArr"}},t._l(t.aMenus,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"从高到底"},model:{value:t.addData.form.sort,callback:function(e){t.$set(t.addData.form,"sort",e)},expression:"addData.form.sort"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subAdd()}}},[t._v("添 加")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editData.show,center:"",width:"680px",top:"20vh"},on:{"update:visible":function(e){return t.$set(t.editData,"show",e)}}},[a("el-form",{attrs:{model:t.editData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"归属"}},[a("el-cascader",{attrs:{options:t.fidClass,"change-on-select":"",filterable:"",clearable:"","expand-trigger":"hover",placeholder:"默认顶级菜单"},model:{value:t.editData.form.fid,callback:function(e){t.$set(t.editData.form,"fid",e)},expression:"editData.form.fid"}})],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"菜单名称"},model:{value:t.editData.form.title,callback:function(e){t.$set(t.editData.form,"title",e)},expression:"editData.form.title"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"链接地址"},model:{value:t.editData.form.url,callback:function(e){t.$set(t.editData.form,"url",e)},expression:"editData.form.url"}})],1),a("el-form-item",{attrs:{label:"图标样式"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"图标样式"},model:{value:t.editData.form.ico,callback:function(e){t.$set(t.editData.form,"ico",e)},expression:"editData.form.ico"}})],1),a("el-form-item",{attrs:{label:"权限值"}},[a("el-checkbox-group",{model:{value:t.editData.form.permArr,callback:function(e){t.$set(t.editData.form,"permArr",e)},expression:"editData.form.permArr"}},t._l(t.aMenus,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"从高到底"},model:{value:t.editData.form.sort,callback:function(e){t.$set(t.editData.form,"sort",e)},expression:"editData.form.sort"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subEdit()}}},[t._v("保 存")])],1)],1),a("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px",top:"38vh"},on:{"update:visible":function(e){return t.$set(t.delData,"show",e)}}},[a("div",[t._v("是否删除已选择数据？")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subDel()}}},[t._v("彻底删除")])],1)])],1)},s=[],o=(a("7f7f"),a("b490")),r={components:{Action:o["a"]},watch:{getSelect:function(t){this.$refs.tree.filter(t)}},data:function(){return{LabelWidth:"80px",selectData:[],listData:{list:[]},getSelect:"",seaData:{show:!1,form:{fid:"",title:"",url:""}},addData:{show:!1,form:{fid:[],title:"",url:"",ico:"",perm:"",permArr:[],sort:0}},editData:{show:!1,form:{fid:[],title:"",url:"",ico:"",perm:"",permArr:[],sort:0}},delData:{show:!1,id:""},aMenus:[],permAll:[],fidClass:[]}},mounted:function(){this.loadData(),this.allAction()},methods:{getEdit:function(t){for(var e in this.editData.show=!0,t)this.editData.form[e]=this.selectData[e]||""},openAction:function(t){if("list"==t)this.loadData();else if("add"==t)this.addData.show=!0;else if("del"==t){var e=this.$refs.tree.getCheckedKeys();e.length>0?(this.delData.show=!0,this.delData.id=e):this.$message.error("请选择数据！")}},loadData:function(){var t=this,e=this.$loading({text:"分页数据"});this.$ajax.post(this.$config.apiUrl+"SysMenus/list","token="+this.$storage.getItem("token")).then((function(a){e.close();var i=a.data;0!=i.code?t.$message.error(i.msg):t.listData.list=i.list})),this.setClass()},subSea:function(t,e){return!t||-1!==e.label.indexOf(t)},subAdd:function(){var t=this,e=this.addData.form.fid;e=e.length>0?e.slice(-1)[0]:"",this.addData.form.fid=e;var a=this.addData.form.permArr,i=0;for(var s in a)i+=parseInt(this.permAll[a[s]]);this.addData.form.perm=i,this.addData.show=!1;var o=this.$loading({text:"正在添加"});this.$ajax.post(this.$config.apiUrl+"SysMenus/add","token="+this.$storage.getItem("token")+"&data="+JSON.stringify(this.addData.form)).then((function(e){o.close();var a=e.data;0!==a.code?t.$message.error(a.msg):(t.$message.success(a.msg),t.loadData())}))},showEdit:function(t){this.editData.show=!0,this.selectData=t,this.getEdit({id:"",fid:[],title:"",url:"",ico:"",perm:"",sort:""}),this.editData.form.fid=[t.fid+""];var e=[];for(var a in this.permAll)this.editData.form.perm&parseInt(this.permAll[a])&&e.push(a);this.editData.form.permArr=e},subEdit:function(){var t=this,e=this.editData.form.fid;e=e.length>0?e.slice(-1)[0]:"",this.editData.form.fid=e;var a=this.editData.form.permArr,i=0;for(var s in a)i+=parseInt(this.permAll[a[s]]);this.editData.form.perm=i,this.editData.show=!1;var o=this.$loading({text:"正在更新"});this.$ajax.post(this.$config.apiUrl+"SysMenus/edit","token="+this.$storage.getItem("token")+"&id="+this.editData.form.id+"&data="+JSON.stringify(this.editData.form)).then((function(e){o.close();var a=e.data;0!==a.code?t.$message.error(a.msg):(t.$message.success(a.msg),t.loadData())}))},subDel:function(){var t=this;this.delData.show=!1;var e=this.$loading({text:"正在删除"});this.$ajax.post(this.$config.apiUrl+"SysMenus/del","token="+this.$storage.getItem("token")+"&data="+JSON.stringify(this.delData.id)).then((function(a){e.close();var i=a.data;0!==i.code?t.$message.error(i.msg):(t.$message.success(i.msg),t.loadData())}))},allAction:function(){var t=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getActionAll","token="+this.$storage.getItem("token")).then((function(e){var a=e.data;if(0!==a.code)t.$message.error(a.msg);else for(var i in t.aMenus=a.aMenus,a.aMenus)t.permAll[a.aMenus[i].name]=a.aMenus[i].perm}))},setClass:function(){var t=this;this.getClass("fid",(function(e){t.fidClass=e.data.list}))},getClass:function(t,e){this.$ajax.post(this.$config.apiUrl+"SysMenus/getClass/"+t,"token="+this.$storage.getItem("token")).then(e)}}},l=r,n=(a("a39b"),a("2877")),d=Object(n["a"])(l,i,s,!1,null,"11409639",null);e["default"]=d.exports},b490:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.actions.length?a("el-row",{staticClass:"action"},[a("el-button-group",t._l(t.actions,(function(e){return a("el-button",{key:e.name,attrs:{icon:e.ico},on:{click:function(a){return t.openAction(e.action)}}},[t._v(t._s(e.name))])})),1)],1):t._e()},s=[],o={name:"Action",props:["url"],data:function(){return{actions:[]}},mounted:function(){this.getAction(this.url)},methods:{getAction:function(t){var e=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getMenusAction","token="+this.$storage.getItem("token")+"&url="+t).then((function(t){var a=t.data;0==a.code&&(e.actions=a.menuAction)}))},openAction:function(t){this.$emit("action",t)}}},r=o,l=a("2877"),n=Object(l["a"])(r,i,s,!1,null,null,null);e["a"]=n.exports}}]);
//# sourceMappingURL=chunk-70f63fc0.9c9bb7cf.js.map