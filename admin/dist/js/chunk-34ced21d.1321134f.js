(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34ced21d"],{"02f4":function(t,e,a){var i=a("4588"),s=a("be13");t.exports=function(t){return function(e,a){var o,r,n=String(s(e)),l=i(a),c=n.length;return l<0||l>=c?t?"":void 0:(o=n.charCodeAt(l),o<55296||o>56319||l+1===c||(r=n.charCodeAt(l+1))<56320||r>57343?t?n.charAt(l):o:t?n.slice(l,l+2):r-56320+(o-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var i=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},"10e1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Action",{attrs:{url:"SysRole"},on:{action:t.openAction}}),a("el-row",{staticClass:"body"},[a("el-table",{attrs:{data:t.pageData.list,stripe:""},on:{"selection-change":t.getSelect}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),a("el-table-column",{attrs:{prop:"role",label:"名称",width:"180"}}),a("el-table-column",{attrs:{label:"更新时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n         "+t._s(e.row.utime||"空")+" \n        ")]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.perm?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.eidtPerm(e.row.id,e.row.perm)}}},[t._v("修改权限")]):a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.eidtPerm(e.row.id,e.row.perm)}}},[t._v("设置权限")])]}}])})],1)],1),a("el-row",{staticClass:"page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:t.pageData.total,"current-page":t.pageData.page,"page-size":t.pageData.limit},on:{"current-change":t.page}})],1),a("el-dialog",{attrs:{title:"搜索",visible:t.seaData.show,center:"",width:"420px"},on:{"update:visible":function(e){return t.$set(t.seaData,"show",e)}}},[a("el-form",{attrs:{model:t.seaData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:t.seaData.form.role,callback:function(e){t.$set(t.seaData.form,"role",e)},expression:"seaData.form.role"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subSea()}}},[t._v("搜 索")])],1)],1),a("el-dialog",{attrs:{title:"添加",visible:t.addData.show,center:"",width:"420px"},on:{"update:visible":function(e){return t.$set(t.addData,"show",e)}}},[a("el-form",{attrs:{model:t.addData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:t.addData.form.role,callback:function(e){t.$set(t.addData.form,"role",e)},expression:"addData.form.role"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subAdd()}}},[t._v("添 加")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editData.show,center:"",width:"420px"},on:{"update:visible":function(e){return t.$set(t.editData,"show",e)}}},[a("el-form",{attrs:{model:t.editData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:t.editData.form.role,callback:function(e){t.$set(t.editData.form,"role",e)},expression:"editData.form.role"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subEdit()}}},[t._v("保 存")])],1)],1),a("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px",top:"38vh"},on:{"update:visible":function(e){return t.$set(t.delData,"show",e)}}},[a("div",[t._v("是否删除已选择数据？")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subDel()}}},[t._v("彻底删除")])],1)]),a("el-dialog",{attrs:{title:"编辑权限",visible:t.permData.show,center:"",width:"480px",top:"5vh"},on:{"update:visible":function(e){return t.$set(t.permData,"show",e)}}},[a("el-tree",{ref:"perm",attrs:{data:t.permData.form,"show-checkbox":"","default-checked-keys":t.permData.default,"node-key":"id"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subPerm()}}},[t._v("更新")])],1)],1)],1)},s=[],o=(a("28a5"),a("b490")),r={components:{Action:o["a"]},data:function(){return{LabelWidth:"80px",selectData:[],pageData:{list:[],total:0,page:1,limit:15},seaData:{show:!1,form:{role:""}},addData:{show:!1,form:{role:""}},editData:{show:!1,form:{role:""}},delData:{show:!1,id:""},permData:{show:!1,id:"",default:[""],form:[]},aMenus:[]}},mounted:function(){this.loadData(),this.allAction()},methods:{page:function(t){this.pageData.page=t,this.loadData()},getSelect:function(t){this.selectData=t},getEdit:function(t){if(this.selectData.length>0)for(var e in this.editData.show=!0,t)this.editData.form[e]=this.selectData[0][e]||"";else this.$message.error("请选择数据！")},openAction:function(t){if("list"==t)this.seaData.form={role:""},this.pageData.page=1,this.loadData();else if("sea"==t)this.seaData.show=!0;else if("add"==t)this.addData.show=!0;else if("edit"==t)this.getEdit({id:"",role:""});else if("del"==t)if(this.selectData.length>0){this.delData.show=!0;for(var e=this.selectData,a="",i=0;i<e.length;i++)a+=e[i].id+",";this.delData.id=a}else this.$message.error("请选择数据！")},loadData:function(){var t=this,e=this.$loading({text:"分页数据"});this.$ajax.post(this.$config.apiUrl+"SysRole/list","token="+this.$storage.getItem("token")+"&page="+this.pageData.page+"&limit="+this.pageData.limit+"&data="+JSON.stringify(this.seaData.form)).then((function(a){e.close();var i=a.data;0!=i.code?t.$message.error(i.msg):(t.pageData.list=i.list,t.pageData.total=i.total)}))},subSea:function(){this.seaData.show=!1,this.pageData.page=1,this.loadData()},subAdd:function(){var t=this;this.addData.show=!1;var e=this.$loading({text:"正在添加"});this.$ajax.post(this.$config.apiUrl+"SysRole/add","token="+this.$storage.getItem("token")+"&data="+JSON.stringify(this.addData.form)).then((function(a){e.close();var i=a.data;0!==i.code?t.$message.error(i.msg):(t.$message.success(i.msg),t.loadData())}))},subEdit:function(){var t=this;this.editData.show=!1;var e=this.$loading({text:"正在更新"});this.$ajax.post(this.$config.apiUrl+"SysRole/edit","token="+this.$storage.getItem("token")+"&id="+this.editData.form.id+"&data="+JSON.stringify(this.editData.form)).then((function(a){e.close();var i=a.data;0!==i.code?t.$message.error(i.msg):(t.$message.success(i.msg),t.loadData())}))},subDel:function(){var t=this;this.delData.show=!1;var e=this.$loading({text:"正在删除"});this.$ajax.post(this.$config.apiUrl+"SysRole/del","token="+this.$storage.getItem("token")+"&data="+this.delData.id).then((function(a){e.close();var i=a.data;0!==i.code?t.$message.error(i.msg):(t.$message.success(i.msg),t.loadData())}))},allAction:function(){var t=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getActionAll","token="+this.$storage.getItem("token")).then((function(e){var a=e.data;0!==a.code?t.$message.error(a.msg):t.aMenus=a.aMenus}))},eidtPerm:function(t,e){var a=this;this.permData.show=!0,this.permData.id=t;var i=this.$loading({text:"更改状态"});this.$ajax.post(this.$config.apiUrl+"SysRole/allMenus","token="+this.$storage.getItem("token")).then((function(t){var s=t.data;if(i.close(),0!==s.code)a.$message.error(s.msg);else{if(a.permData.form=s.menus,!e)return;for(var o=[],r=[],n=e.split(" "),l=[],c=0;c<n.length;c++)for(var d in l=n[c].split(":"),e=parseInt(l[1]),a.aMenus)e&parseInt(a.aMenus[d].perm)&&o.push(l[0]+":"+a.aMenus[d].perm);for(var u in o)r.push(s.id[o[u]]);a.$refs.perm.setCheckedKeys(r)}}))},subPerm:function(){var t=this,e=this.$refs.perm.getCheckedKeys(),a=[],i=[],s=[],o={},r="";for(var n in e){for(var l in a=e[n].split(","),i=a[0].split("-"),i)o[i[l]]=0;s=a[1].split(":"),o[s[0]]=o[s[0]]?o[s[0]]+parseInt(s[1]):parseInt(s[1])}for(var c in o)r+=c+":"+o[c]+" ";this.permData.show=!1;var d=this.$loading({text:"编辑"});this.$ajax.post(this.$config.apiUrl+"SysRole/perm","token="+this.$storage.getItem("token")+"&id="+this.permData.id+"&perm="+r).then((function(e){d.close();var a=e.data;0!==a.code?t.$message.error(a.msg):(t.$message.success(a.msg),t.loadData())}))}}},n=r,l=a("2877"),c=Object(l["a"])(n,i,s,!1,null,"8dddc280",null);e["default"]=c.exports},"28a5":function(t,e,a){"use strict";var i=a("aae3"),s=a("cb7c"),o=a("ebd6"),r=a("0390"),n=a("9def"),l=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,h=[].push,f="split",p="length",m="lastIndex",g=4294967295,v=!d((function(){RegExp(g,"y")}));a("214f")("split",2,(function(t,e,a,d){var D;return D="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(s,t,e);var o,r,n,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=void 0===e?g:e>>>0,v=new RegExp(t.source,d+"g");while(o=c.call(v,s)){if(r=v[m],r>u&&(l.push(s.slice(u,o.index)),o[p]>1&&o.index<s[p]&&h.apply(l,o.slice(1)),n=o[0][p],u=r,l[p]>=f))break;v[m]===o.index&&v[m]++}return u===s[p]?!n&&v.test("")||l.push(""):l.push(s.slice(u)),l[p]>f?l.slice(0,f):l}:"0"[f](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,i){var s=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,s,i):D.call(String(s),a,i)},function(t,e){var i=d(D,t,this,e,D!==a);if(i.done)return i.value;var c=s(t),h=String(this),f=o(c,RegExp),p=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),b=new f(v?c:"^(?:"+c.source+")",m),w=void 0===e?g:e>>>0;if(0===w)return[];if(0===h.length)return null===l(b,h)?[h]:[];var $=0,k=0,x=[];while(k<h.length){b.lastIndex=v?k:0;var y,A=l(b,v?h:h.slice(k));if(null===A||(y=u(n(b.lastIndex+(v?0:k)),h.length))===$)k=r(h,k,p);else{if(x.push(h.slice($,k)),x.length===w)return x;for(var S=1;S<=A.length-1;S++)if(x.push(A[S]),x.length===w)return x;k=$=y}}return x.push(h.slice($)),x}]}))},aae3:function(t,e,a){var i=a("d3f4"),s=a("2d95"),o=a("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==s(t))}},b490:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.actions.length?a("el-row",{staticClass:"action"},[a("el-button-group",t._l(t.actions,(function(e){return a("el-button",{key:e.name,attrs:{icon:e.ico},on:{click:function(a){return t.openAction(e.action)}}},[t._v(t._s(e.name))])})),1)],1):t._e()},s=[],o={name:"Action",props:["url"],data:function(){return{actions:[]}},mounted:function(){this.getAction(this.url)},methods:{getAction:function(t){var e=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getMenusAction","token="+this.$storage.getItem("token")+"&url="+t).then((function(t){var a=t.data;0==a.code&&(e.actions=a.menuAction)}))},openAction:function(t){this.$emit("action",t)}}},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-34ced21d.1321134f.js.map