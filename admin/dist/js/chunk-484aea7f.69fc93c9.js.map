{"version":3,"sources":["webpack:///./src/views/system/Config.vue?48c7","webpack:///./src/views/system/Config.js","webpack:///./src/views/system/Config.js?d358","webpack:///./src/views/system/Config.vue","webpack:///./src/views/system/Config.vue?3f92"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","form","LabelWidth","logo","style","backgroundImage","$config","baseUrl","on","$event","upImage","staticStyle","model","value","callback","$$v","$set","expression","login_bg","onSubmit","_v","staticRenderFns","data","title","http","copy","mounted","loadData","methods","loading","$loading","text","$ajax","post","apiUrl","$storage","getItem","then","res","close","d","code","$message","error","msg","list","JSON","stringify","tmp","parse","$store","state","system","success","event","type","el","currentTarget","fileObj","files","perm","width","height","Plus","readerCompress","base64","img","component"],"mappings":"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","file":"js/chunk-484aea7f.69fc93c9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{staticClass:\"body mtop\"},[_c('el-form',{attrs:{\"model\":_vm.form,\"label-width\":_vm.LabelWidth}},[_c('el-form-item',{attrs:{\"label\":\"LOGO\"}},[(!_vm.form.logo)?_c('label',{staticClass:\"upload bgimg radius\",attrs:{\"for\":\"logo\"}}):_c('label',{staticClass:\"upload bgimg radius bgcover\",style:({backgroundImage:'url('+_vm.$config.baseUrl+_vm.form.logo+')'}),attrs:{\"for\":\"logo\"}}),_c('input',{staticClass:\"hide\",attrs:{\"type\":\"file\",\"id\":\"logo\"},on:{\"change\":function($event){return _vm.upImage($event,'logo')}}})]),_c('el-form-item',{attrs:{\"label\":\"系统名称\"}},[_c('el-input',{staticStyle:{\"max-width\":\"320px\"},attrs:{\"placeholder\":\"请输入系统名称、公司名称等\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"网站域名\"}},[_c('el-input',{staticStyle:{\"max-width\":\"320px\"},attrs:{\"placeholder\":\"请输入网站域名\"},model:{value:(_vm.form.http),callback:function ($$v) {_vm.$set(_vm.form, \"http\", $$v)},expression:\"form.http\"}})],1),_c('el-form-item',{attrs:{\"label\":\"版权信息\"}},[_c('el-input',{staticStyle:{\"max-width\":\"320px\"},attrs:{\"placeholder\":\"请输入版权信息\"},model:{value:(_vm.form.copy),callback:function ($$v) {_vm.$set(_vm.form, \"copy\", $$v)},expression:\"form.copy\"}})],1),_c('el-form-item',{attrs:{\"label\":\"登录背景\"}},[(!_vm.form.login_bg)?_c('label',{staticClass:\"upload bgimg\",attrs:{\"for\":\"login_bg\"}}):_c('label',{staticClass:\"upload bgimg bgcover\",style:({backgroundImage:'url('+_vm.$config.baseUrl+_vm.form.login_bg+')'}),attrs:{\"for\":\"login_bg\"}}),_c('input',{staticClass:\"hide\",attrs:{\"type\":\"file\",\"id\":\"login_bg\"},on:{\"change\":function($event){return _vm.upImage($event,'bg')}}})]),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit()}}},[_vm._v(\"保存设置\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Plus from '@/library/Plus'\n\nexport default {\n  data(){\n    return {\n      LabelWidth:'100px',\n      form:{logo:'',title:'',http:'',copy:'',login_bg:''},\n    }\n  },\n  mounted(){\n    this.loadData();\n  },\n  methods:{\n\n    /* 加载数据 */\n    loadData(){\n      const loading = this.$loading({text: '分页数据'});\n      this.$ajax.post(\n        this.$config.apiUrl+'Sysconfig/list',\n        'token='+this.$storage.getItem('token')\n      ).then((res)=>{\n        loading.close();\n        const d = res.data;\n        if(d.code!=0){\n          this.$message.error(d.msg);\n        }else{\n          this.form = d.list;\n        }\n      });\n    },\n\n    /* 提交表单 */\n    onSubmit(){\n      const loading = this.$loading({text: '提交数据'});\n      const data = JSON.stringify(this.form);\n      this.$ajax.post(\n        this.$config.apiUrl+'Sysconfig/edit',\n        'token='+this.$storage.getItem('token')+'&data='+data\n      ).then((res)=>{\n        loading.close();\n        const d = res.data;\n        if(d.code==0){\n          // 刷新\n          const tmp = JSON.parse(data);\n          this.$store.state.system.title = tmp.title;\n          this.$store.state.system.copy = tmp.copy;\n          return this.$message.success(d.msg);\n        }else{\n          return this.$message.error(d.msg);\n        }\n      });\n    },\n\n    /* 上传图片 */\n    upImage(event,type){\n      const el = event.currentTarget;\n      const fileObj = el.files[0];\n      let perm = {};\n      // 类型\n      if(type=='logo'){\n        perm.width = 100;\n        perm.height = 100;\n      }else if(type=='bg'){\n        perm.width = 1366;\n      }\n      // 压缩\n      Plus.readerCompress(fileObj,perm,(base64)=>{\n        const loading = this.$loading({text: '提交数据'});\n        this.$ajax.post(\n          this.$config.apiUrl+'Sysconfig/upImage',\n          'token='+this.$storage.getItem('token')+'&type='+type+'&base64='+base64\n        ).then((res)=>{\n          loading.close();\n          const d = res.data;\n          if(d.code == 0){\n            this.$message.success(d.msg);\n            if(type=='logo'){\n              this.form.logo = d.img;\n              this.$store.state.system.logo = d.img;\n            }else if(type=='bg'){\n              this.form.login_bg = d.img;\n              this.$store.state.system.login_bg = d.img;\n            }\n          }else{\n            this.$message.error(d.msg);\n          }\n        });\n      });\n    },\n\n  }\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!./Config.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!./Config.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Config.vue?vue&type=template&id=6d73e0c8&scoped=true&\"\nimport script from \"./Config.js?vue&type=script&lang=js&\"\nexport * from \"./Config.js?vue&type=script&lang=js&\"\nimport style0 from \"./Config.vue?vue&type=style&index=0&id=6d73e0c8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d73e0c8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Config.vue?vue&type=style&index=0&id=6d73e0c8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Config.vue?vue&type=style&index=0&id=6d73e0c8&scoped=true&lang=css&\""],"sourceRoot":""}