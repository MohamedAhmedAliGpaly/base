(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a2c4d09"],{"187d":function(t,e,a){},4901:function(t,e,a){},a6e8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticClass:"hide",model:{value:t.actionType,callback:function(e){t.actionType=e},expression:"actionType"}}),a("el-row",{staticClass:"body"},[a("div",{staticClass:"body_tree"},[a("el-row",{staticClass:"tree_search"},[a("el-input",{attrs:{placeholder:"搜索菜单名称"},model:{value:t.getSelect,callback:function(e){t.getSelect=e},expression:"getSelect"}})],1),a("div",{staticClass:"flex tree_node_title"},[a("div",[t._v("菜单名称")]),a("div",{staticClass:"flex"},[a("dd",{staticStyle:{width:"120px"}},[t._v("控制器")]),a("dd",{staticStyle:{width:"160px"}},[t._v("图标")]),a("dd",{staticStyle:{width:"30px"}},[t._v("权限")]),a("dd",{staticStyle:{width:"30px"}},[t._v("排序")]),a("dd",{staticStyle:{width:"60px"}},[t._v("操作")]),a("dd",{staticStyle:{width:"90px"}},[t._v("更新日期")])])]),a("el-tree",{ref:"tree",attrs:{data:t.listData.list,"show-checkbox":"","node-key":"id","filter-node-method":t.subSea},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,s=e.data;return a("span",{staticClass:"tree_node"},[a("span",[t._v(t._s(i.label))]),a("div",{staticClass:"flex tree_node_width"},[a("dd",{staticStyle:{width:"120px"}},[t._v(t._s(s.url))]),a("dd",{staticStyle:{width:"160px"}},[t._v(t._s(s.ico))]),a("dd",{staticStyle:{width:"30px"}},[t._v(t._s(s.perm))]),a("dd",{staticStyle:{width:"30px"}},[t._v(t._s(s.sort))]),a("dd",{staticStyle:{width:"60px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.showEdit(s)}}},[t._v("编辑")])],1),a("dd",{staticStyle:{width:"90px"}},[t._v(t._s(s.utime?s.utime.substr(0,10):"空"))])])])}}])})],1)]),a("el-dialog",{attrs:{title:"添加",visible:t.addData.show,center:"",width:"680px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.addData,"show",e)}}},[a("el-form",{attrs:{model:t.addData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"归属"}},[a("el-cascader",{staticStyle:{width:"100%","max-width":"360px"},attrs:{options:t.fidClass,"change-on-select":"",filterable:"",clearable:"","expand-trigger":"hover",placeholder:"默认顶级菜单"},model:{value:t.addData.form.fid,callback:function(e){t.$set(t.addData.form,"fid",e)},expression:"addData.form.fid"}})],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"菜单名称"},model:{value:t.addData.form.title,callback:function(e){t.$set(t.addData.form,"title",e)},expression:"addData.form.title"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"链接地址"},model:{value:t.addData.form.url,callback:function(e){t.$set(t.addData.form,"url",e)},expression:"addData.form.url"}})],1),a("el-form-item",{attrs:{label:"图标样式"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"图标样式"},model:{value:t.addData.form.ico,callback:function(e){t.$set(t.addData.form,"ico",e)},expression:"addData.form.ico"}})],1),a("el-form-item",{attrs:{label:"权限值"}},[a("el-checkbox-group",{model:{value:t.addData.form.permArr,callback:function(e){t.$set(t.addData.form,"permArr",e)},expression:"addData.form.permArr"}},t._l(t.aMenus,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"从高到底"},model:{value:t.addData.form.sort,callback:function(e){t.$set(t.addData.form,"sort",e)},expression:"addData.form.sort"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subAdd()}}},[t._v("添 加")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editData.show,center:"",width:"680px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.editData,"show",e)}}},[a("el-form",{attrs:{model:t.editData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"归属"}},[a("el-cascader",{attrs:{options:t.fidClass,"change-on-select":"",filterable:"",clearable:"","expand-trigger":"hover",placeholder:"默认顶级菜单"},model:{value:t.editData.form.fid,callback:function(e){t.$set(t.editData.form,"fid",e)},expression:"editData.form.fid"}})],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"菜单名称"},model:{value:t.editData.form.title,callback:function(e){t.$set(t.editData.form,"title",e)},expression:"editData.form.title"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"链接地址"},model:{value:t.editData.form.url,callback:function(e){t.$set(t.editData.form,"url",e)},expression:"editData.form.url"}})],1),a("el-form-item",{attrs:{label:"图标样式"}},[a("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"图标样式"},model:{value:t.editData.form.ico,callback:function(e){t.$set(t.editData.form,"ico",e)},expression:"editData.form.ico"}})],1),a("el-form-item",{attrs:{label:"权限值"}},[a("el-checkbox-group",{model:{value:t.editData.form.permArr,callback:function(e){t.$set(t.editData.form,"permArr",e)},expression:"editData.form.permArr"}},t._l(t.aMenus,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"从高到底"},model:{value:t.editData.form.sort,callback:function(e){t.$set(t.editData.form,"sort",e)},expression:"editData.form.sort"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subEdit()}}},[t._v("保 存")])],1)],1),a("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px"},on:{"update:visible":function(e){return t.$set(t.delData,"show",e)}}},[a("div",[t._v("是否删除已选择数据？")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subDel()}}},[t._v("彻底删除")])],1)])],1)},s=[],r=(a("7f7f"),a("e563")),l=a("919a"),o=a("8a2a"),d=a("775b"),n=a("58fd"),c={components:{Action:n["a"]},data:function(){return{LabelWidth:"80px",selectData:[],listData:{list:[]},getSelect:"",seaData:{show:!1,form:{fid:"",title:"",url:""}},addData:{show:!1,form:{fid:[],title:"",url:"",ico:"",perm:"",permArr:[],sort:0}},editData:{show:!1,form:{fid:[],title:"",url:"",ico:"",perm:"",permArr:[],sort:0}},delData:{show:!1,id:""},aMenus:[],permAll:[],fidClass:[]}},watch:{getSelect:function(t){this.$refs.tree.filter(t)}},computed:{actionType:function(){var t=this.$store.state.action.type;if("list"==t)this.loadData();else if("add"==t)this.addData.show=!0;else if("del"==t){var e=this.$refs.tree.getCheckedKeys();e.length>0?(this.delData.show=!0,this.delData.id=e):Object(r["a"])("请选择数据!")}}},mounted:function(){this.$store.state.action.url="SysMenus",this.$store.state.action.menus="",this.loadData(),this.allAction()},methods:{loadData:function(){var t=this,e=Object(l["a"])();Object(o["a"])("Sysmenus/list",{token:d["a"].getItem("token")},(function(a){e.clear();var i=a.data;if(0!=i.code)return Object(r["a"])(i.msg);t.listData.list=i.list})),this.setClass()},subSea:function(t,e){return!t||-1!==e.label.indexOf(t)},subAdd:function(){var t=this,e=this.addData.form.fid;e=e.length>0?e.slice(-1)[0]:"",this.addData.form.fid=e;var a=this.addData.form.permArr,i=0;for(var s in a)i+=parseInt(this.permAll[a[s]]);this.addData.form.perm=i,this.addData.show=!1;var n=Object(l["a"])();Object(o["a"])("Sysmenus/add",{token:d["a"].getItem("token"),data:JSON.stringify(this.addData.form)},(function(e){n.clear();var a=e.data;return 0===a.code&&t.loadData(),Object(r["a"])(a.msg)}))},showEdit:function(t){this.editData.show=!0,this.selectData=t,this.getEdit({id:"",fid:[],title:"",url:"",ico:"",perm:"",sort:""}),this.editData.form.fid=[t.fid+""];var e=[];for(var a in this.permAll)this.editData.form.perm&parseInt(this.permAll[a])&&e.push(a);this.editData.form.permArr=e},getEdit:function(t){for(var e in this.editData.show=!0,t)this.editData.form[e]=this.selectData[e]||""},subEdit:function(){var t=this,e=this.editData.form.fid;e=e.length>0?e.slice(-1)[0]:"",this.editData.form.fid=e;var a=this.editData.form.permArr,i=0;for(var s in a)i+=parseInt(this.permAll[a[s]]);this.editData.form.perm=i,this.editData.show=!1;var n=Object(l["a"])();Object(o["a"])("Sysmenus/edit",{token:d["a"].getItem("token"),id:this.editData.form.id,data:JSON.stringify(this.editData.form)},(function(e){n.clear();var a=e.data;return 0===a.code&&t.loadData(),Object(r["a"])(a.msg)}))},subDel:function(){var t=this;this.delData.show=!1;var e=Object(l["a"])();Object(o["a"])("Sysmenus/del",{token:d["a"].getItem("token"),data:JSON.stringify(this.delData.id)},(function(a){e.clear();var i=a.data;return 0===i.code&&t.loadData(),Object(r["a"])(i.msg)}))},allAction:function(){var t=this;Object(o["a"])("Usermain/getActionAll",{token:d["a"].getItem("token")},(function(e){var a=e.data;if(0!==a.code)Object(r["a"])(a.msg,"error");else for(var i in t.aMenus=a.aMenus,a.aMenus)t.permAll[a.aMenus[i].name]=a.aMenus[i].perm}))},setClass:function(){var t=this;this.getClass("fid",(function(e){t.fidClass=e.data.list}))},getClass:function(t,e){Object(o["a"])("Sysmenus/getClass/"+t,{token:d["a"].getItem("token")},e)}}},f=c,m=(a("df45"),a("e0b7"),a("2877")),u=Object(m["a"])(f,i,s,!1,null,"1368d94c",null);e["default"]=u.exports},df45:function(t,e,a){"use strict";var i=a("4901"),s=a.n(i);s.a},e0b7:function(t,e,a){"use strict";var i=a("187d"),s=a.n(i);s.a}}]);