(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cef3167e"],{"1e5b":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Action",{attrs:{url:"WebMsg"},on:{action:t.openAction}}),e("el-row",{staticClass:"body"},[e("el-table",{attrs:{data:t.pageData.list,stripe:""},on:{"selection-change":t.getSelect}},[e("el-table-column",{attrs:{type:"selection",width:"40"}}),e("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e("el-table-column",{attrs:{label:"状态",width:"90"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.is_new?e("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(e){return t.openShow(a.row)}}},[t._v("阅读")]):t._e(),1==a.row.is_new?e("el-button",{attrs:{size:"mini",type:"info",round:""},on:{click:function(e){return t.openShow(a.row)}}},[t._v("已读")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"title",label:"标题"}}),e("el-table-column",{attrs:{prop:"ctime",label:"发送时间",width:"180"}}),e("el-table-column",{attrs:{prop:"content",label:"内容"}})],1)],1),e("el-row",{staticClass:"page"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:t.pageData.total,"current-page":t.pageData.page,"page-size":t.pageData.limit},on:{"current-change":t.page}})],1),e("el-dialog",{attrs:{title:"搜索",visible:t.seaData.show,center:"",width:"420px",top:"30vh"},on:{"update:visible":function(a){return t.$set(t.seaData,"show",a)}}},[e("el-form",{attrs:{model:t.seaData.form,"label-width":t.LabelWidth}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{placeholder:"输入标题"},model:{value:t.seaData.form.title,callback:function(a){t.$set(t.seaData.form,"title",a)},expression:"seaData.form.title"}})],1),e("el-form-item",{attrs:{label:"内容"}},[e("el-input",{attrs:{placeholder:"输入内容"},model:{value:t.seaData.form.content,callback:function(a){t.$set(t.seaData.form,"content",a)},expression:"seaData.form.content"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.subSea()}}},[t._v("搜 索")])],1)],1),e("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px",top:"38vh"},on:{"update:visible":function(a){return t.$set(t.delData,"show",a)}}},[e("div",[t._v("是否删除已选择数据？")]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.subDel()}}},[t._v("彻底删除")])],1)]),e("el-dialog",{staticClass:"form",attrs:{title:"阅读",visible:t.showData.show,center:"",width:"420px",top:"30vh"},on:{"update:visible":function(a){return t.$set(t.showData,"show",a)}}},[e("el-row",[e("b",{staticClass:"title"},[t._v(t._s(t.showData.data.title))])]),e("el-row",[t._v(t._s(t.showData.data.ctime))]),e("el-row",[t._v(t._s(t.showData.data.content))])],1)],1)},s=[],i=e("b490"),n={components:{Action:i["a"]},data:function(){return{LabelWidth:"80px",selectData:[],pageData:{list:[],total:0,page:1,limit:15},seaData:{show:!1,form:{title:"",content:""}},delData:{show:!1,id:""},showData:{show:!1,id:"",data:{}}}},mounted:function(){this.loadData()},methods:{page:function(t){this.pageData.page=t,this.loadData()},getSelect:function(t){this.selectData=t},getEdit:function(t){if(this.selectData.length>0)for(var a in this.editData.show=!0,t)this.editData.form[a]=this.selectData[0][a]||"";else this.$message.error("请选择数据！")},openAction:function(t){if("list"==t)this.seaData.form={title:"",content:""},this.pageData.page=1,this.loadData();else if("sea"==t)this.seaData.show=!0;else if("del"==t)if(this.selectData.length>0){this.delData.show=!0;for(var a=this.selectData,e="",o=0;o<a.length;o++)e+=a[o].id+",";this.delData.id=e}else this.$message.error("请选择数据！")},loadData:function(){var t=this,a=this.$loading({text:"分页数据"});this.$ajax.post(this.$config.apiUrl+"WebMsg/list","token="+this.$storage.getItem("token")+"&page="+this.pageData.page+"&limit="+this.pageData.limit+"&data="+JSON.stringify(this.seaData.form)).then((function(e){a.close();var o=e.data;0!=o.code?t.$message.error(o.msg):(t.pageData.list=o.list,t.pageData.total=o.total)}))},subSea:function(){this.seaData.show=!1,this.pageData.page=1,this.loadData()},subDel:function(){var t=this;this.delData.show=!1;var a=this.$loading({text:"正在删除"});this.$ajax.post(this.$config.apiUrl+"WebMsg/del","token="+this.$storage.getItem("token")+"&data="+this.delData.id).then((function(e){a.close();var o=e.data;0!==o.code?t.$message.error(o.msg):(t.$message.success(o.msg),t.loadData())}))},openShow:function(t){var a=this;this.showData.show=!0,this.showData.data=t,0==t.is_new&&this.$ajax.post(this.$config.apiUrl+"WebMsg/state","token="+this.$storage.getItem("token")+"&id="+t.id).then((function(t){var e=t.data;0!==e.code?a.$message.error(e.msg):a.loadData()}))}}},l=n,r=e("2877"),c=Object(r["a"])(l,o,s,!1,null,"1fbbfaae",null);a["default"]=c.exports},b490:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.actions.length?e("el-row",{staticClass:"action"},[e("el-button-group",t._l(t.actions,(function(a){return e("el-button",{key:a.name,attrs:{icon:a.ico},on:{click:function(e){return t.openAction(a.action)}}},[t._v(t._s(a.name))])})),1)],1):t._e()},s=[],i={name:"Action",props:["url"],data:function(){return{actions:[]}},mounted:function(){this.getAction(this.url)},methods:{getAction:function(t){var a=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getMenusAction","token="+this.$storage.getItem("token")+"&url="+t).then((function(t){var e=t.data;0==e.code&&(a.actions=e.menuAction)}))},openAction:function(t){this.$emit("action",t)}}},n=i,l=e("2877"),r=Object(l["a"])(n,o,s,!1,null,null,null);a["a"]=r.exports}}]);
//# sourceMappingURL=chunk-cef3167e.32ec78ff.js.map