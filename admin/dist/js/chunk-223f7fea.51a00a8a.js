(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-223f7fea"],{"02f4":function(t,e,i){var a=i("4588"),n=i("be13");t.exports=function(t){return function(e,i){var s,o,r=String(n(e)),l=a(i),c=r.length;return l<0||l>=c?t?"":void 0:(s=r.charCodeAt(l),s<55296||s>56319||l+1===c||(o=r.charCodeAt(l+1))<56320||o>57343?t?r.charAt(l):s:t?r.slice(l,l+2):o-56320+(s-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var a=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?a(t,e).length:1)}},"28a5":function(t,e,i){"use strict";var a=i("aae3"),n=i("cb7c"),s=i("ebd6"),o=i("0390"),r=i("9def"),l=i("5f1b"),c=i("520a"),u=i("79e5"),f=Math.min,h=[].push,d="split",m="length",p="lastIndex",v=4294967295,g=!u((function(){RegExp(v,"y")}));i("214f")("split",2,(function(t,e,i,u){var b;return b="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[m]||2!="ab"[d](/(?:ab)*/)[m]||4!="."[d](/(.?)(.?)/)[m]||"."[d](/()()/)[m]>1||""[d](/.?/)[m]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!a(t))return i.call(n,t,e);var s,o,r,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?v:e>>>0,g=new RegExp(t.source,u+"g");while(s=c.call(g,n)){if(o=g[p],o>f&&(l.push(n.slice(f,s.index)),s[m]>1&&s.index<n[m]&&h.apply(l,s.slice(1)),r=s[0][m],f=o,l[m]>=d))break;g[p]===s.index&&g[p]++}return f===n[m]?!r&&g.test("")||l.push(""):l.push(n.slice(f)),l[m]>d?l.slice(0,d):l}:"0"[d](void 0,0)[m]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,a){var n=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,n,a):b.call(String(n),i,a)},function(t,e){var a=u(b,t,this,e,b!==i);if(a.done)return a.value;var c=n(t),h=String(this),d=s(c,RegExp),m=c.unicode,p=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),k=new d(g?c:"^(?:"+c.source+")",p),w=void 0===e?v:e>>>0;if(0===w)return[];if(0===h.length)return null===l(k,h)?[h]:[];var _=0,D=0,x=[];while(D<h.length){k.lastIndex=g?D:0;var $,C=l(k,g?h:h.slice(D));if(null===C||($=f(r(k.lastIndex+(g?0:D)),h.length))===_)D=o(h,D,m);else{if(x.push(h.slice(_,D)),x.length===w)return x;for(var y=1;y<=C.length-1;y++)if(x.push(C[y]),x.length===w)return x;D=_=$}}return x.push(h.slice(_)),x}]}))},"52e8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{staticClass:"action"},[i("el-button-group",[i("el-button",{attrs:{icon:"el-icon-folder-add"},on:{click:function(e){return t.mkDir()}}},[t._v("新建文件夹")]),i("el-button",{attrs:{icon:"el-icon-document-add"},on:{click:function(e){return t.selectFile()}}},[t._v("上传")]),i("el-button",{attrs:{icon:"el-icon-bottom"},on:{click:function(e){return t.zipFile()}}},[t._v("打包")]),i("el-button",{attrs:{icon:"el-icon-edit-outline"},on:{click:function(e){return t.reName()}}},[t._v("重命名")]),i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(e){return t.rmFile()}}},[t._v("删除")])],1)],1),i("el-row",{staticClass:"body"},[i("el-row",{staticClass:"file_path"},[i("span",{staticClass:"path"},[i("span",{domProps:{innerHTML:t._s("/"==t.path?"返回上级":"<a>返回上级</a>")},on:{click:function(e){return t.backDir()}}}),t._v("|"),i("span",[i("a",{on:{click:function(e){return t.loadData()}}},[t._v("刷新")])]),t._v("|"),i("span",[t._v(t._s(t.path))])]),i("span",{staticClass:"info"},[t._v("文件夹( "+t._s(t.lists.dirNum)+" ) 文件( "+t._s(t.lists.fileNum)+" ) 大小( "+t._s(t.lists.size)+" )")])]),i("el-row",{staticClass:"file_load",style:{backgroundImage:"linear-gradient(to right, "+t.$config.themeColor+", "+t.$config.themeColor+" "+t.loaded+", #F2F4F6 "+t.loaded+", #F2F4F6 100%)"}},[i("span",{staticClass:"text",style:{width:t.loaded}},[t._v(t._s(t.loaded))])]),0!=t.lists.folder.length||0!=t.lists.files.length?i("ul",{staticClass:"file_ct"},[t._l(t.lists.folder,(function(e,a){return i("li",{key:"dir"+a,class:e.check?"file_active":"file_state"},[i("div",{staticClass:"file_click",on:{click:function(t){e.check=!e.check}}},[i("i",{staticClass:"el-icon-success"})]),i("div",{staticClass:"file",on:{click:function(i){return t.openFolder(e.name)}}},[i("div",{staticClass:"ico_mask ico_folder file_folder"}),i("div",{staticClass:"name nowrap",attrs:{title:e.name}},[t._v(t._s(e.name))])])])})),t._l(t.lists.files,(function(e,a){return i("li",{key:"file"+a,class:e.check?"file_active":"file_state"},[i("div",{staticClass:"file_click",on:{click:function(t){e.check=!e.check}}},[i("i",{staticClass:"el-icon-success"})]),i("div",{staticClass:"file",on:{click:function(i){return t.openFile(e.name)}}},[i("div",{staticClass:"ico_mask ico_file file_file"}),i("div",{staticClass:"name nowrap",attrs:{title:e.name}},[t._v(t._s(e.name))])])])}))],2):i("div",{staticClass:"null"})],1),i("el-dialog",{attrs:{title:"新建文件夹",visible:t.folder.show,center:"",width:"480px",top:"30vh"},on:{"update:visible":function(e){return t.$set(t.folder,"show",e)}}},[i("el-form",{attrs:{model:t.folder.form,"label-width":t.LabelWidth}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{attrs:{placeholder:"文件夹名称"},model:{value:t.folder.form.name,callback:function(e){t.$set(t.folder.form,"name",e)},expression:"folder.form.name"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subDir()}}},[t._v("新 建")])],1)],1),i("el-dialog",{attrs:{title:"打包",visible:t.zipData.show,center:"",width:"480px",top:"30vh"},on:{"update:visible":function(e){return t.$set(t.zipData,"show",e)}}},[i("el-form",{attrs:{model:t.zipData.form,"label-width":t.LabelWidth}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{attrs:{placeholder:"压缩名称"},model:{value:t.zipData.form.name,callback:function(e){t.$set(t.zipData.form,"name",e)},expression:"zipData.form.name"}},[i("template",{slot:"append"},[t._v(".zip")])],2)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subZip()}}},[t._v("在线打包")])],1)],1),i("el-dialog",{attrs:{title:"重命名",visible:t.renameData.show,center:"",width:"480px",top:"30vh"},on:{"update:visible":function(e){return t.$set(t.renameData,"show",e)}}},[i("el-form",{attrs:{model:t.renameData.form,"label-width":t.LabelWidth}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{attrs:{placeholder:"文件夹、文件的名称"},model:{value:t.renameData.form.name,callback:function(e){t.$set(t.renameData.form,"name",e)},expression:"renameData.form.name"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subRename()}}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px",top:"38vh"},on:{"update:visible":function(e){return t.$set(t.delData,"show",e)}}},[i("div",[t._v("是否删除已选择文件？")]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subDel()}}},[t._v("彻底删除")])],1)])],1)},n=[],s=(i("7f7f"),i("28a5"),i("b490")),o={components:{Action:s["a"]},data:function(){return{LabelWidth:"80px",path:"/",loaded:"0%",lists:{folder:[],files:[]},folder:{show:!1,form:{name:""}},zipData:{show:!1,form:{name:"",files:[]}},renameData:{show:!1,form:{rename:"",name:""}},delData:{show:!1,data:[]}}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;this.$ajax.post(this.$config.apiUrl+"Filemanage/list","token="+this.$storage.getItem("token")+"&path="+this.path).then((function(e){var i=e.data;0==i.code&&(t.lists=i.data)}))},openFolder:function(t){this.path+=t+"/",this.loadData()},backDir:function(){var t=this.path.split("/").filter((function(t){return t}));if(t.length<=1)this.path="/";else{this.path="/";for(var e=0;e<t.length-1;e++)this.path+=t[e]+"/"}this.loadData()},mkDir:function(){this.folder.show=!0},subDir:function(){var t=this.folder.form.name;this.isExist(t)||(this.folder.show=!1,this.subAjax("mkDir","&path="+this.path+"&name="+t))},zipFile:function(){var t=this.getCheckName();t&&(this.zipData.show=!0,this.zipData.form.files=t)},subZip:function(){var t=this.zipData.form.name,e=JSON.stringify(this.zipData.form.files);t&&!this.isExist(t+".zip")&&(this.zipData.show=!1,this.subAjax("zipFile","&path="+this.path+"&name="+t+"&files="+e))},reName:function(){var t=this.getCheckName();t&&(this.renameData.show=!0,this.renameData.form.rename=t[0],this.renameData.form.name=t[0])},subRename:function(){var t=this.renameData.form.rename,e=this.renameData.form.name;if(!e)return this.$message.error("名称不能为空");this.isExist(e)||(this.renameData.show=!1,this.subAjax("reName","&path="+this.path+"&rename="+t+"&name="+e))},openFile:function(t){var e=this.getType(t);e&&this.downFile(t)},selectFile:function(){var t=this,e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("multiple","multiple"),document.body.appendChild(e),e.click(),e.onchange=function(){for(var i=0;i<e.files.length;i++){var a=new FormData;a.append("token",t.$storage.getItem("token")),a.append("path",t.path),a.append("up",e.files[i]),t.upFile(a)}}},upFile:function(t){var e=this;this.loaded="10%",this.$ajax.post(this.$config.apiUrl+"Filemanage/upFile",t,{onUploadProgress:function(t){var i=t.loaded/t.total*100|0;e.loaded=i<100?i+"%":"0%"}}).then((function(t){var i=t.data;0!==i.code?i.msg&&e.$message.error(i.msg):(i.msg&&e.$message.success(i.msg),e.loadData())}))},downFile:function(t){this.subAjax("downFile","&path="+this.path+"&file="+t,(function(e){var i=new Blob([e]),a=document.createElement("a"),n=window.URL.createObjectURL(i);a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}),{responseType:"blob"})},rmFile:function(){var t=this.getCheckName();t&&(this.delData.show=!0,this.delData.data=t)},subDel:function(){var t=JSON.stringify(this.delData.data);this.delData.show=!1,this.subAjax("rmFile","&path="+this.path+"&data="+t)},subAjax:function(t,e,i,a){var n=this,s=this.$loading({text:"正在提交"});this.$ajax.post(this.$config.apiUrl+"Filemanage/"+t,"token="+this.$storage.getItem("token")+e,a).then((function(t){s.close();var e=t.data;i&&i(e),0!==e.code?e.msg&&n.$message.error(e.msg):(e.msg&&n.$message.success(e.msg),n.loadData())}))},getCheckName:function(){var t=this.lists.folder,e=this.lists.files,i=[];for(var a in t)t[a].check&&i.push(t[a].name);for(var n in e)e[n].check&&i.push(e[n].name);return i.length<1?(this.$message.error("请选择内容"),!1):i},isExist:function(t){var e=this.lists.folder,i=this.lists.files;if(!t)return this.$message.error("请填写名称"),!0;for(var a in e)if(e[a].name==t)return this.$message.error("已存在文件夹"),!0;for(var n in i)if(i[n].name==t)return this.$message.error("已存在文件"),!0;return!1},getType:function(t){var e=t.lastIndexOf(".")+1,i=t.length;return t.substring(e,i)}}},r=o,l=(i("cc6f"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,"d5287ea4",null);e["default"]=c.exports},"99ff":function(t,e,i){},aae3:function(t,e,i){var a=i("d3f4"),n=i("2d95"),s=i("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},b490:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.actions.length?i("el-row",{staticClass:"action"},[i("el-button-group",t._l(t.actions,(function(e){return i("el-button",{key:e.name,attrs:{icon:e.ico},on:{click:function(i){return t.openAction(e.action)}}},[t._v(t._s(e.name))])})),1)],1):t._e()},n=[],s={name:"Action",props:["url"],data:function(){return{actions:[]}},mounted:function(){this.getAction(this.url)},methods:{getAction:function(t){var e=this;this.$ajax.post(this.$config.apiUrl+"Usermain/getMenusAction","token="+this.$storage.getItem("token")+"&url="+t).then((function(t){var i=t.data;0==i.code&&(e.actions=i.menuAction)}))},openAction:function(t){this.$emit("action",t)}}},o=s,r=i("2877"),l=Object(r["a"])(o,a,n,!1,null,null,null);e["a"]=l.exports},cc6f:function(t,e,i){"use strict";var a=i("99ff"),n=i.n(a);n.a}}]);
//# sourceMappingURL=chunk-223f7fea.51a00a8a.js.map