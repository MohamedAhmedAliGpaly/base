(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e0a797d"],{"02f4":function(t,e,a){var s=a("4588"),r=a("be13");t.exports=function(t){return function(e,a){var i,o,n=String(r(e)),l=s(a),c=n.length;return l<0||l>=c?t?"":void 0:(i=n.charCodeAt(l),i<55296||i>56319||l+1===c||(o=n.charCodeAt(l+1))<56320||o>57343?t?n.charAt(l):i:t?n.slice(l,l+2):o-56320+(i-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var s=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?s(t,e).length:1)}},"28a5":function(t,e,a){"use strict";var s=a("aae3"),r=a("cb7c"),i=a("ebd6"),o=a("0390"),n=a("9def"),l=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,m=[].push,h="split",p="length",f="lastIndex",g=4294967295,v=!d((function(){RegExp(g,"y")}));a("214f")("split",2,(function(t,e,a,d){var w;return w="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!s(t))return a.call(r,t,e);var i,o,n,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=void 0===e?g:e>>>0,v=new RegExp(t.source,d+"g");while(i=c.call(v,r)){if(o=v[f],o>u&&(l.push(r.slice(u,i.index)),i[p]>1&&i.index<r[p]&&m.apply(l,i.slice(1)),n=i[0][p],u=o,l[p]>=h))break;v[f]===i.index&&v[f]++}return u===r[p]?!n&&v.test("")||l.push(""):l.push(r.slice(u)),l[p]>h?l.slice(0,h):l}:"0"[h](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,s){var r=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,r,s):w.call(String(r),a,s)},function(t,e){var s=d(w,t,this,e,w!==a);if(s.done)return s.value;var c=r(t),m=String(this),h=i(c,RegExp),p=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),D=new h(v?c:"^(?:"+c.source+")",f),b=void 0===e?g:e>>>0;if(0===b)return[];if(0===m.length)return null===l(D,m)?[m]:[];var $=0,k=0,_=[];while(k<m.length){D.lastIndex=v?k:0;var x,y=l(D,v?m:m.slice(k));if(null===y||(x=u(n(D.lastIndex+(v?0:k)),m.length))===$)k=o(m,k,p);else{if(_.push(m.slice($,k)),_.length===b)return _;for(var S=1;S<=y.length-1;S++)if(_.push(y[S]),_.length===b)return _;k=$=x}}return _.push(m.slice($)),_}]}))},"6a53":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Action",{attrs:{url:"SysUser"},on:{action:t.openAction}}),a("el-row",{staticClass:"body"},[a("el-table",{attrs:{data:t.pageData.list,stripe:""},on:{"selection-change":t.getSelect}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),a("el-table-column",{attrs:{label:"帐号信息",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("帐号: "+t._s(e.row.uname))]),a("p",[t._v("手机: "+t._s(e.row.tel))]),a("p",[t._v("邮箱: "+t._s(e.row.email))]),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.tel||e.row.uname||e.row.email))])],1)])]}}])}),a("el-table-column",{attrs:{label:"头像",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.img?a("el-image",{staticClass:"img",attrs:{src:t.$config.baseUrl+e.row.img}}):a("el-image",{attrs:{src:""}},[a("div",{attrs:{slot:"error"},slot:"error"},[t._v("无")])])]}}])}),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"100"}}),a("el-table-column",{attrs:{prop:"ltime",label:"个人信息",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("姓名: "+t._s(e.row.name||"无"))]),a("p",[t._v("性别: "+t._s(e.row.gender||"无"))]),a("p",[t._v("生日: "+t._s(e.row.birthday||"无"))]),a("p",[t._v("职务: "+t._s(e.row.position||"无"))]),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{type:"info",size:"medium"}},[t._v(t._s(e.row.name||"空"))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"ltime",label:"登录时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("登录时间: "+t._s(e.row.ltime||"无"))]),a("p",[t._v("更新数据: "+t._s(e.row.utime||"无"))]),a("p",[t._v("注册时间: "+t._s(e.row.rtime||"无"))]),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{type:"info",size:"medium"}},[t._v(t._s(e.row.ltime?e.row.ltime.substr(0,10):"空"))])],1)])]}}])}),a("el-table-column",{attrs:{label:"正常/禁用",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-color":"#CCC"},on:{change:function(a){return t.State("all",e.row.id,e.row.state)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:"后台登录",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-color":"#CCC"},on:{change:function(a){return t.State("admin",e.row.id,e.row.state_admin)}},model:{value:e.row.state_admin,callback:function(a){t.$set(e.row,"state_admin",a)},expression:"scope.row.state_admin"}})]}}])}),a("el-table-column",{attrs:{label:"APP登录",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-color":"#CCC"},on:{change:function(a){return t.State("app",e.row.id,e.row.state_app)}},model:{value:e.row.state_app,callback:function(a){t.$set(e.row,"state_app",a)},expression:"scope.row.state_app"}})]}}])}),a("el-table-column",{attrs:{label:"权限模式","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.perm?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.eidtPerm(e.row.id,e.row.perm,e.row.role)}}},[t._v("专属权限")]):a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.eidtPerm(e.row.id,e.row.perm,e.row.role)}}},[t._v("角色权限")])]}}])})],1)],1),a("el-row",{staticClass:"page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:t.pageData.total,"current-page":t.pageData.page,"page-size":t.pageData.limit},on:{"current-change":t.page}})],1),a("el-dialog",{attrs:{title:"搜索",visible:t.seaData.show,center:"",width:"420px",top:"30vh"},on:{"update:visible":function(e){return t.$set(t.seaData,"show",e)}}},[a("el-form",{attrs:{model:t.seaData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"帐号"}},[a("el-input",{attrs:{placeholder:"用户名/手机/邮箱"},model:{value:t.seaData.form.uname,callback:function(e){t.$set(t.seaData.form,"uname",e)},expression:"seaData.form.uname"}})],1),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:t.seaData.form.name,callback:function(e){t.$set(t.seaData.form,"name",e)},expression:"seaData.form.name"}})],1),a("el-form-item",{attrs:{label:"职务"}},[a("el-input",{attrs:{placeholder:"用户职务"},model:{value:t.seaData.form.position,callback:function(e){t.$set(t.seaData.form,"position",e)},expression:"seaData.form.position"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subSea()}}},[t._v("搜索")])],1)],1),a("el-dialog",{attrs:{title:"添加",visible:t.addData.show,center:"",width:"480px",top:"26vh"},on:{"update:visible":function(e){return t.$set(t.addData,"show",e)}}},[a("el-form",{attrs:{model:t.addData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"英文开头5~16位字符"},model:{value:t.addData.form.uname,callback:function(e){t.$set(t.addData.form,"uname",e)},expression:"addData.form.uname"}})],1),a("el-form-item",{attrs:{label:"登录密码"}},[a("el-input",{attrs:{type:"password",placeholder:"6~16位字符 | 默认:123456"},model:{value:t.addData.form.passwd,callback:function(e){t.$set(t.addData.form,"passwd",e)},expression:"addData.form.passwd"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"手机号码"},model:{value:t.addData.form.tel,callback:function(e){t.$set(t.addData.form,"tel",e)},expression:"addData.form.tel"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"邮箱"},model:{value:t.addData.form.email,callback:function(e){t.$set(t.addData.form,"email",e)},expression:"addData.form.email"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subAdd()}}},[t._v("添 加")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editData.show,center:"",width:"480px",top:"26vh"},on:{"update:visible":function(e){return t.$set(t.editData,"show",e)}}},[a("el-form",{attrs:{model:t.editData.form,"label-width":t.LabelWidth}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"英文开头5~16位字符"},model:{value:t.editData.form.uname,callback:function(e){t.$set(t.editData.form,"uname",e)},expression:"editData.form.uname"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password",placeholder:"6~16位字符 | 空为不修改"},model:{value:t.editData.form.passwd,callback:function(e){t.$set(t.editData.form,"passwd",e)},expression:"editData.form.passwd"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"手机号码"},model:{value:t.editData.form.tel,callback:function(e){t.$set(t.editData.form,"tel",e)},expression:"editData.form.tel"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.editData.form.email,callback:function(e){t.$set(t.editData.form,"email",e)},expression:"editData.form.email"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subEdit()}}},[t._v("保 存")])],1)],1),a("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px",top:"38vh"},on:{"update:visible":function(e){return t.$set(t.delData,"show",e)}}},[a("div",[t._v("是否删除已选择数据？")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subDel()}}},[t._v("彻底删除")])],1)]),a("el-dialog",{attrs:{title:"编辑权限",visible:t.permData.show,center:"",width:"480px",top:"5vh"},on:{"update:visible":function(e){return t.$set(t.permData,"show",e)}}},[a("el-tabs",{model:{value:t.permData.active,callback:function(e){t.$set(t.permData,"active",e)},expression:"permData.active"}},[a("el-tab-pane",{attrs:{label:"专属权限",name:"one"}},[a("el-tree",{ref:"perm",attrs:{data:t.permData.form,"show-checkbox":"","default-checked-keys":t.permData.default,"node-key":"id"}})],1),a("el-tab-pane",{attrs:{label:"角色权限",name:"two"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色权限",clearable:"",filterable:""},model:{value:t.permData.role,callback:function(e){t.$set(t.permData,"role",e)},expression:"permData.role"}},t._l(t.userRole,(function(e){return a("el-option",{key:e.id,attrs:{label:e.role,value:e.id}},[a("span",{staticClass:"select_left"},[t._v(t._s(e.role))]),a("span",{staticClass:"select_right"},[t._v(t._s(e.id))])])})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subPerm()}}},[t._v("更新")])],1)],1)],1)},r=[],i=(a("28a5"),a("b490")),o={components:{Action:i["a"]},data:function(){return{LabelWidth:"80px",selectData:[],pageData:{list:[],total:0,page:1,limit:15},seaData:{show:!1,form:{uname:"",name:"",position:""}},addData:{show:!1,form:{uname:"",passwd:"",tel:"",email:""}},editData:{show:!1,form:{uname:"",passwd:"",tel:"",email:""}},delData:{show:!1},permData:{show:!1,active:"one",uid:"",default:[""],form:[],role:""},aMenus:[],userRole:[]}},mounted:function(){this.loadData(),this.allAction()},methods:{page:function(t){this.pageData.page=t,this.loadData()},getSelect:function(t){this.selectData=t},getEdit:function(t){if(this.selectData.length>0)for(var e in this.editData.show=!0,t)this.editData.form[e]=this.selectData[0][e]||"";else this.$message.error("请选择数据！")},openAction:function(t){if("list"==t)this.seaData.form={uname:"",name:"",position:""},this.pageData.page=1,this.loadData();else if("sea"==t)this.seaData.show=!0;else if("add"==t)this.addData.show=!0;else if("edit"==t)this.getEdit({id:"",uname:"",passwd:"",tel:"",email:""});else if("del"==t)if(this.selectData.length>0){this.delData.show=!0;for(var e=this.selectData,a="",s=0;s<e.length;s++)a+=e[s].id+",";this.delData.id=a}else this.$message.error("请选择数据！")},loadData:function(){var t=this,e=this.$loading({text:"分页数据"});this.$ajax.post(this.$config.apiUrl+"SysUser/list","token="+this.$storage.getItem("token")+"&page="+this.pageData.page+"&limit="+this.pageData.limit+"&data="+JSON.stringify(this.seaData.form)).then((function(a){e.close();var s=a.data;0!=s.code?t.$message.error(s.msg):(t.pageData.list=s.list,t.pageData.total=s.total)})),this.setClass()},subSea:function(){this.seaData.show=!1,this.pageData.page=1,this.loadData()},subAdd:function(){var t=this,e=this.addData.form.uname,a=this.addData.form.tel,s=this.addData.form.email,r=this.addData.form.passwd;if(0==e.length&&0==a.length&&0==s.length)return this.$message.error("用户名、手机、邮箱至少填一项");if(e.length>0&&1!=this.$reg("uname",e))return this.$message.error(this.$reg("uname",e));if(a.length>0&&1!=this.$reg("tel",a))return this.$message.error(this.$reg("tel",a));if(s.length>0&&1!=this.$reg("email",s))return this.$message.error(this.$reg("email",s));if(r.length>0&&1!=this.$reg("passwd",r))return this.$message.error(this.$reg("passwd",r));this.addData.show=!1;var i=this.$loading({text:"正在添加"});this.$ajax.post(this.$config.apiUrl+"SysUser/add","token="+this.$storage.getItem("token")+"&data="+JSON.stringify(this.addData.form)).then((function(e){i.close();var a=e.data;0!==a.code?t.$message.error(a.msg):(t.$message.success(a.msg),t.loadData())}))},subEdit:function(){var t=this,e=this.editData.form.uname,a=this.editData.form.tel,s=this.editData.form.email,r=this.editData.form.passwd;if(0==e.length&&0==a.length&&0==s.length)return this.$message.error("用户名、手机、邮箱至少填一项");if(e.length>0&&1!=this.$reg("uname",e))return this.$message.error(this.$reg("uname",e));if(a.length>0&&1!=this.$reg("tel",a))return this.$message.error(this.$reg("tel",a));if(s.length>0&&1!=this.$reg("email",s))return this.$message.error(this.$reg("email",s));if(r.length>0&&1!=this.$reg("passwd",r))return this.$message.error(this.$reg("passwd",r));this.editData.show=!1;var i=this.$loading({text:"正在更新"});this.$ajax.post(this.$config.apiUrl+"SysUser/edit","token="+this.$storage.getItem("token")+"&id="+this.editData.form.id+"&data="+JSON.stringify(this.editData.form)).then((function(e){i.close();var a=e.data;0!==a.code?t.$message.error(a.msg):(t.$message.success(a.msg),t.loadData())}))},subDel:function(){var t=this;this.delData.show=!1;var e=this.$loading({text:"正在删除"});this.$ajax.post(this.$config.apiUrl+"SysUser/del","token="+this.$storage.getItem("token")+"&data="+this.delData.id).then((function(a){e.close();var s=a.data;0!==s.code?t.$message.error(s.msg):(t.$message.success(s.msg),t.loadData())}))},State:function(t,e,a){var s=this;a=a?1:0;var r=this.$loading({text:"更改状态"});this.$ajax.post(this.$config.apiUrl+"SysUser/state","token="+this.$storage.getItem("token")+"&type="+t+"&id="+e+"&state="+a).then((function(t){r.close();var e=t.data;return 0==e.code?s.$message.success(e.msg):s.$message.error(e.msg)}))},setClass:function(){var t=this;this.getClass("userRole",(function(e){t.userRole=e.data.list}))},getClass:function(t,e){this.$ajax.post(this.$config.apiUrl+"SysUser/getClass/"+t,"token="+this.$storage.getItem("token")).then(e)},allAction:function(){var t=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getActionAll","token="+this.$storage.getItem("token")).then((function(e){var a=e.data;0!==a.code?t.$message.error(a.msg):t.aMenus=a.aMenus}))},eidtPerm:function(t,e,a){var s=this;this.permData.show=!0,this.permData.uid=t,this.permData.role=a||"";var r=this.$loading({text:"更改状态"});this.$ajax.post(this.$config.apiUrl+"SysUser/allMenus","token="+this.$storage.getItem("token")).then((function(t){var a=t.data;if(r.close(),0!==a.code)s.$message.error(a.msg);else{s.permData.form=a.menus;var i=[],o=[];if(e)for(var n=e.split(" "),l=[],c=0;c<n.length;c++)for(var d in l=n[c].split(":"),e=parseInt(l[1]),s.aMenus)e&parseInt(s.aMenus[d].perm)&&i.push(l[0]+":"+s.aMenus[d].perm);for(var u in i)o.push(a.id[i[u]]);s.$refs.perm.setCheckedKeys(o)}}))},subPerm:function(){var t=this,e=this.$refs.perm.getCheckedKeys(),a=[],s=[],r=[],i={},o="";for(var n in e){for(var l in a=e[n].split(","),s=a[0].split("-"),s)i[s[l]]=0;r=a[1].split(":"),i[r[0]]=i[r[0]]?i[r[0]]+parseInt(r[1]):parseInt(r[1])}for(var c in i)o+=c+":"+i[c]+" ";this.permData.show=!1;var d=this.$loading({text:"编辑"});this.$ajax.post(this.$config.apiUrl+"SysUser/perm","token="+this.$storage.getItem("token")+"&id="+this.permData.uid+"&perm="+o+"&role="+this.permData.role).then((function(e){d.close();var a=e.data;0!==a.code?t.$message.error(a.msg):(t.$message.success(a.msg),t.loadData())}))}}},n=o,l=(a("7f21"),a("2877")),c=Object(l["a"])(n,s,r,!1,null,"34916b52",null);e["default"]=c.exports},"7f21":function(t,e,a){"use strict";var s=a("8fe8"),r=a.n(s);r.a},"8fe8":function(t,e,a){},aae3:function(t,e,a){var s=a("d3f4"),r=a("2d95"),i=a("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==r(t))}},b490:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.actions.length?a("el-row",{staticClass:"action"},[a("el-button-group",t._l(t.actions,(function(e){return a("el-button",{key:e.name,attrs:{icon:e.ico},on:{click:function(a){return t.openAction(e.action)}}},[t._v(t._s(e.name))])})),1)],1):t._e()},r=[],i={name:"Action",props:["url"],data:function(){return{actions:[]}},mounted:function(){this.getAction(this.url)},methods:{getAction:function(t){var e=this;this.$ajax.post(this.$config.apiUrl+"UserMain/getMenusAction","token="+this.$storage.getItem("token")+"&url="+t).then((function(t){var a=t.data;0==a.code&&(e.actions=a.menuAction)}))},openAction:function(t){this.$emit("action",t)}}},o=i,n=a("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-1e0a797d.2fbb6668.js.map