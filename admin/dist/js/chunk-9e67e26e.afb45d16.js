(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e67e26e"],{"187d":function(t,a,e){},4901:function(t,a,e){},a6e8:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-input",{staticClass:"hide",model:{value:t.actionType,callback:function(a){t.actionType=a},expression:"actionType"}}),e("el-row",{staticClass:"body"},[e("div",{staticClass:"body_tree"},[e("el-row",{staticClass:"tree_search"},[e("el-input",{attrs:{placeholder:"搜索菜单名称"},model:{value:t.getSelect,callback:function(a){t.getSelect=a},expression:"getSelect"}})],1),e("div",{staticClass:"flex tree_node_title"},[e("div",[t._v("菜单名称")]),e("div",{staticClass:"flex"},[e("dd",{staticStyle:{width:"120px"}},[t._v("控制器")]),e("dd",{staticStyle:{width:"160px"}},[t._v("图标")]),e("dd",{staticStyle:{width:"30px"}},[t._v("权限")]),e("dd",{staticStyle:{width:"30px"}},[t._v("排序")]),e("dd",{staticStyle:{width:"60px"}},[t._v("操作")]),e("dd",{staticStyle:{width:"90px"}},[t._v("更新日期")])])]),e("el-tree",{ref:"tree",attrs:{data:t.listData.list,"show-checkbox":"","node-key":"id","filter-node-method":t.subSea},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.node,s=a.data;return e("span",{staticClass:"tree_node"},[e("span",[t._v(t._s(i.label))]),e("div",{staticClass:"flex tree_node_width"},[e("dd",{staticStyle:{width:"120px"}},[t._v(t._s(s.url))]),e("dd",{staticStyle:{width:"160px"}},[t._v(t._s(s.ico))]),e("dd",{staticStyle:{width:"30px"}},[t._v(t._s(s.perm))]),e("dd",{staticStyle:{width:"30px"}},[t._v(t._s(s.sort))]),e("dd",{staticStyle:{width:"60px"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.showEdit(s)}}},[t._v("编辑")])],1),e("dd",{staticStyle:{width:"90px"}},[t._v(t._s(s.utime?s.utime.substr(0,10):"空"))])])])}}])})],1)]),e("el-dialog",{attrs:{title:"添加",visible:t.addData.show,center:"",width:"680px","close-on-click-modal":!1},on:{"update:visible":function(a){return t.$set(t.addData,"show",a)}}},[e("el-form",{attrs:{model:t.addData.form,"label-width":t.LabelWidth}},[e("el-form-item",{attrs:{label:"归属"}},[e("el-cascader",{staticStyle:{width:"100%","max-width":"360px"},attrs:{options:t.fidClass,"change-on-select":"",filterable:"",clearable:"","expand-trigger":"hover",placeholder:"默认顶级菜单"},model:{value:t.addData.form.fid,callback:function(a){t.$set(t.addData.form,"fid",a)},expression:"addData.form.fid"}})],1),e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"菜单名称"},model:{value:t.addData.form.title,callback:function(a){t.$set(t.addData.form,"title",a)},expression:"addData.form.title"}})],1),e("el-form-item",{attrs:{label:"链接"}},[e("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"链接地址"},model:{value:t.addData.form.url,callback:function(a){t.$set(t.addData.form,"url",a)},expression:"addData.form.url"}})],1),e("el-form-item",{attrs:{label:"图标样式"}},[e("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"图标样式"},model:{value:t.addData.form.ico,callback:function(a){t.$set(t.addData.form,"ico",a)},expression:"addData.form.ico"}})],1),e("el-form-item",{attrs:{label:"权限值"}},[e("el-checkbox-group",{model:{value:t.addData.form.permArr,callback:function(a){t.$set(t.addData.form,"permArr",a)},expression:"addData.form.permArr"}},t._l(t.aMenus,(function(t){return e("el-checkbox",{key:t.name,attrs:{label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"排序"}},[e("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"从高到底"},model:{value:t.addData.form.sort,callback:function(a){t.$set(t.addData.form,"sort",a)},expression:"addData.form.sort"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.subAdd()}}},[t._v("添 加")])],1)],1),e("el-dialog",{attrs:{title:"编辑",visible:t.editData.show,center:"",width:"680px","close-on-click-modal":!1},on:{"update:visible":function(a){return t.$set(t.editData,"show",a)}}},[e("el-form",{attrs:{model:t.editData.form,"label-width":t.LabelWidth}},[e("el-form-item",{attrs:{label:"归属"}},[e("el-cascader",{attrs:{options:t.fidClass,"change-on-select":"",filterable:"",clearable:"","expand-trigger":"hover",placeholder:"默认顶级菜单"},model:{value:t.editData.form.fid,callback:function(a){t.$set(t.editData.form,"fid",a)},expression:"editData.form.fid"}})],1),e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"菜单名称"},model:{value:t.editData.form.title,callback:function(a){t.$set(t.editData.form,"title",a)},expression:"editData.form.title"}})],1),e("el-form-item",{attrs:{label:"链接"}},[e("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"链接地址"},model:{value:t.editData.form.url,callback:function(a){t.$set(t.editData.form,"url",a)},expression:"editData.form.url"}})],1),e("el-form-item",{attrs:{label:"图标样式"}},[e("el-input",{staticStyle:{"max-width":"360px"},attrs:{placeholder:"图标样式"},model:{value:t.editData.form.ico,callback:function(a){t.$set(t.editData.form,"ico",a)},expression:"editData.form.ico"}})],1),e("el-form-item",{attrs:{label:"权限值"}},[e("el-checkbox-group",{model:{value:t.editData.form.permArr,callback:function(a){t.$set(t.editData.form,"permArr",a)},expression:"editData.form.permArr"}},t._l(t.aMenus,(function(t){return e("el-checkbox",{key:t.name,attrs:{label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"排序"}},[e("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"从高到底"},model:{value:t.editData.form.sort,callback:function(a){t.$set(t.editData.form,"sort",a)},expression:"editData.form.sort"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.subEdit()}}},[t._v("保 存")])],1)],1),e("el-dialog",{attrs:{title:"删除",visible:t.delData.show,center:"",width:"320px"},on:{"update:visible":function(a){return t.$set(t.delData,"show",a)}}},[e("div",[t._v("是否删除已选择数据？")]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.subDel()}}},[t._v("彻底删除")])],1)])],1)},s=[],r=(e("7f7f"),e("7c2f")),l=e("58fd"),o={components:{Action:l["a"]},data:function(){return{LabelWidth:"80px",selectData:[],listData:{list:[]},getSelect:"",seaData:{show:!1,form:{fid:"",title:"",url:""}},addData:{show:!1,form:{fid:[],title:"",url:"",ico:"",perm:"",permArr:[],sort:0}},editData:{show:!1,form:{fid:[],title:"",url:"",ico:"",perm:"",permArr:[],sort:0}},delData:{show:!1,id:""},aMenus:[],permAll:[],fidClass:[]}},watch:{getSelect:function(t){this.$refs.tree.filter(t)}},computed:{actionType:function(){this.$store.state.action.url="SysMenus";var t=this.$store.state.action.type;if("list"==t)this.loadData();else if("add"==t)this.addData.show=!0;else if("del"==t){var a=this.$refs.tree.getCheckedKeys();a.length>0?(this.delData.show=!0,this.delData.id=a):r["a"].toast("请选择数据!")}}},mounted:function(){this.loadData(),this.allAction()},methods:{loadData:function(){var t=this,a=r["a"].loading();r["a"].post("Sysmenus/list",{token:r["a"].storage.getItem("token")},(function(e){a.clear();var i=e.data;if(0!=i.code)return r["a"].toast(i.msg);t.listData.list=i.list})),this.setClass()},subSea:function(t,a){return!t||-1!==a.label.indexOf(t)},subAdd:function(){var t=this,a=this.addData.form.fid;a=a.length>0?a.slice(-1)[0]:"",this.addData.form.fid=a;var e=this.addData.form.permArr,i=0;for(var s in e)i+=parseInt(this.permAll[e[s]]);this.addData.form.perm=i,this.addData.show=!1;var l=r["a"].loading();r["a"].post("Sysmenus/add",{token:r["a"].storage.getItem("token"),data:JSON.stringify(this.addData.form)},(function(a){var e=a.data;return 0!==e.code?l.clear():t.loadData(),r["a"].toast(e.msg)}))},showEdit:function(t){this.editData.show=!0,this.selectData=t,this.getEdit({id:"",fid:[],title:"",url:"",ico:"",perm:"",sort:""}),this.editData.form.fid=[t.fid+""];var a=[];for(var e in this.permAll)this.editData.form.perm&parseInt(this.permAll[e])&&a.push(e);this.editData.form.permArr=a},getEdit:function(t){for(var a in this.editData.show=!0,t)this.editData.form[a]=this.selectData[a]||""},subEdit:function(){var t=this,a=this.editData.form.fid;a=a.length>0?a.slice(-1)[0]:"",this.editData.form.fid=a;var e=this.editData.form.permArr,i=0;for(var s in e)i+=parseInt(this.permAll[e[s]]);this.editData.form.perm=i,this.editData.show=!1;var l=r["a"].loading();r["a"].post("Sysmenus/edit",{token:r["a"].storage.getItem("token"),id:this.editData.form.id,data:JSON.stringify(this.editData.form)},(function(a){var e=a.data;return 0!==e.code?l.clear():t.loadData(),r["a"].toast(e.msg)}))},subDel:function(){var t=this;this.delData.show=!1;var a=r["a"].loading();r["a"].post("Sysmenus/del",{token:r["a"].storage.getItem("token"),data:JSON.stringify(this.delData.id)},(function(e){var i=e.data;return 0!==i.code?a.clear():t.loadData(),r["a"].toast(i.msg)}))},allAction:function(){var t=this;r["a"].post("Usermain/getActionAll",{token:r["a"].storage.getItem("token")},(function(a){var e=a.data;if(0!==e.code)r["a"].toast(e.msg,"error");else for(var i in t.aMenus=e.aMenus,e.aMenus)t.permAll[e.aMenus[i].name]=e.aMenus[i].perm}))},setClass:function(){var t=this;this.getClass("fid",(function(a){t.fidClass=a.data.list}))},getClass:function(t,a){r["a"].post("Sysmenus/getClass/"+t,{token:r["a"].storage.getItem("token")},a)}}},d=o,n=(e("df45"),e("e0b7"),e("2877")),c=Object(n["a"])(d,i,s,!1,null,"1368d94c",null);a["default"]=c.exports},df45:function(t,a,e){"use strict";var i=e("4901"),s=e.n(i);s.a},e0b7:function(t,a,e){"use strict";var i=e("187d"),s=e.n(i);s.a}}]);