(function(t){function e(e){for(var n,a,r=e[0],u=e[1],c=e[2],l=0,d=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,a=1;a<o.length;a++){var r=o[a];0!==s[r]&&(n=!1)}n&&(i.splice(e--,1),t=u(u.s=o[0]))}return t}var n={},a={app:0},s={app:0},i=[];function r(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-5344acdb":"281e106b","chunk-ee41c646":"d5b85161","chunk-f2b22600":"f5427c93"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(t){var e=[],o={"chunk-5344acdb":1,"chunk-f2b22600":1};a[t]?e.push(a[t]):0!==a[t]&&o[t]&&e.push(a[t]=new Promise((function(e,o){for(var n="css/"+({}[t]||t)+"."+{"chunk-5344acdb":"7bb07bde","chunk-ee41c646":"31d6cfe0","chunk-f2b22600":"00785c98"}[t]+".css",s=u.p+n,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var c=i[r],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],l=c.getAttribute("data-href");if(l===n||l===s)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||s,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete a[t],p.parentNode.removeChild(p),o(i)},p.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,o){n=s[t]=[e,o]}));e.push(n[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=r(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(p);var o=s[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,o[1](d)}s[t]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,o){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(o,n,function(e){return t[e]}.bind(null,n));return o},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var p=l;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("85ec"),a=o.n(n);a.a},"1d2c":function(t,e,o){"use strict";var n=o("2468"),a=o.n(n);a.a},2468:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("b0c0"),o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=o("8c4f");n["default"].use(a["a"]),a["a"].prototype.goBack=function(t){this.isBack=!0,this.go(t)};var s=[{path:"/",name:"index",meta:{keepAlive:!0},component:function(t){return o.e("chunk-f2b22600").then(function(){var e=[o("d504")];t.apply(null,e)}.bind(this)).catch(o.oe)}},{path:"/refresh",name:"Refresh",meta:{keepAlive:!1},component:function(t){return o.e("chunk-ee41c646").then(function(){var e=[o("ea97")];t.apply(null,e)}.bind(this)).catch(o.oe)}},{path:"/demo",name:"Demo",meta:{keepAlive:!1},component:function(t){return o.e("chunk-5344acdb").then(function(){var e=[o("c876")];t.apply(null,e)}.bind(this)).catch(o.oe)}}],i=a["a"].prototype.push;a["a"].prototype.push=function(t){return i.call(this,t).catch((function(t){return t}))};var r=new a["a"]({base:"",routes:s}),u=r,c=o("2f62");n["default"].use(c["a"]);var l=new c["a"].Store({state:{mode:"light",statusBarHeight:0,isLogin:"",uInfo:{},geolocation:{},socket:null,uMsg:{scroll:null,group:[],num:""},uNotify:{},scan:null}}),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[t.update.show?o("div",{staticClass:"update_body",style:{backgroundColor:t.upDateColor.bg}},[o("div",{staticClass:"update_ct verticalCenter"},[o("div",{staticClass:"logo",style:{backgroundColor:t.upDateColor.logoBg}},[o("div")]),o("div",{staticClass:"loading",style:{backgroundImage:"linear-gradient(to right, "+t.upDateColor.loading+", "+t.upDateColor.loading+" "+t.update.loading+", "+t.upDateColor.loaded+" "+t.update.loading+", "+t.upDateColor.loaded+" 100%)"}}),o("div",{staticClass:"load_msg",style:{color:t.upDateColor.msgColor},domProps:{innerHTML:t._s(t.update.msg)}},[t._v("正在加载应用")]),o("div",{staticClass:"load_button"},[t.update.down?o("button",{staticClass:"Button",style:{color:t.upDateColor.butColor,backgroundColor:t.upDateColor.butBg},on:{click:function(e){return t.updateDown()}}},[t._v(t._s(t.upDateColor.butText))]):t._e()])]),o("div",{staticClass:"update_logo",style:{color:t.upDateColor.copy}},[o("h1",[t._v(t._s(t.$config.title))]),o("h2",[t._v(t._s(t.$config.copy))])])]):t._e(),o("transition",{attrs:{name:t.transitionName}},[o("keep-alive",{attrs:{max:t.keepAlive}},[t.$route.meta.keepAlive?o("router-view",{staticClass:"view",class:"dark"==t.mode?"view_dark":""}):t._e(),t.$route.meta.keepAlive?t._e():o("router-view",{key:"time"+(new Date).getTime(),staticClass:"view",class:"dark"==t.mode?"view_dark":""})],1)],1)],1)},p=[],f=(o("b680"),o("8c89")),m=function(t,e){var o=document.createElement("div");o.setAttribute("class","wm-ui_toast"),o.innerHTML="<span>"+t+"</span>",document.body.appendChild(o),setTimeout((function(){o.style.opacity="1",o.style.top="10%"}),100),e=e||3e3,setTimeout((function(){document.body.removeChild(o)}),e)},g={setItem:function(t,e){return window.localStorage.setItem(t,e)},getItem:function(t){return window.localStorage.getItem(t)},clear:function(){return window.localStorage.clear()}},h=o("bc3a"),v=o.n(h),b=function(t,e,o,n,a){var s=t.substr(0,4);t="http"==s?t:f["a"].apiUrl+t;var i=new FormData;for(var r in e)i.append(r,e[r]);var u=f["a"].request;for(var c in a=a||{},u)a[c]=u[c];v.a.post(t,i,a).then(o).catch(n)},y=o("fbd7"),k=function(t){document.addEventListener("plusready",t,!1)},w=function(t){try{var e=plus.webview.currentWebview();plus.key.addEventListener("backbutton",(function(){e.canBack(t)}))}catch(o){return m("Android返回键")}},C=o("8f9b"),S=o.n(C);S.a.initAMapApiLoader({key:f["a"].amapKey,plugin:["AMap.Geolocation","PlaceSearch"],v:"1.4.15"});var _=function t(e,o){try{plus.geolocation.getCurrentPosition((function(t){var o={province:t.address.province,city:t.address.city,district:t.address.district,longitude:t.coords.longitude,latitude:t.coords.latitude};g.setItem("geolocation",JSON.stringify(o)),e(o)}),o)}catch(n){try{AMap.service("AMap.Geolocation",(function(){var t=new AMap.Geolocation({enableHighAccuracy:!1,timeout:5e3});t.getCurrentPosition((function(t,o){if(o&&o.position){var n={province:o.addressComponent.province,city:o.addressComponent.city,district:o.addressComponent.district,longitude:o.position.lng,latitude:o.position.lat};g.setItem("geolocation",JSON.stringify(n)),e(n)}}))}))}catch(n){setTimeout((function(){t(e,o)}),3e3)}}},$=_,I=function(t,e,o,n,a){var s=t.substr(0,4);t="http"==s?t:f["a"].apiUrl+t;var i=f["a"].request;for(var r in a=a||{},i)a[r]=i[r];v.a.get(t,{params:e},a).then(o).catch(n)},A=function(){return{language:"zh_CN",language_url:"/tinymce/zh_CN.js",skin_url:"/tinymce/skins/ui/oxide",height:550,menubar:!0,branding:!1,toolbar:"undo redo | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | table image media preview | removeformat | help",toolbar_items_size:"small",plugins:["advlist autolink lists link image charmap print preview anchor textcolor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"]}},M=function(t){var e=document.getElementsByClassName("wm-ui_load")[0];e&&document.body.removeChild(e);var o=document.createElement("div");o.setAttribute("class","wm-ui_load"),o.innerHTML='<span><i class="ui ui_loading"></i></span>',document.body.appendChild(o),t=t||1e4;var n=setTimeout((function(){e=document.getElementsByClassName("wm-ui_load")[0],e&&document.body.removeChild(e)}),t);return{clear:function(){document.body.removeChild(o),clearTimeout(n)}}},B=o("bf8a");y["a"],B["a"],o("ac1f"),o("841c");S.a.initAMapApiLoader({key:f["a"].amapKey,plugin:["AMap.Geolocation","PlaceSearch"],v:"1.4.15"});var N=function(t,e,o){Inc.config.msgBrowser&&window.Notification&&"denied"!==Notification.permission&&Notification.requestPermission((function(o){new Notification(t,{body:e})}));var n="title"==Inc.config.msgContent?t:e;if(m(n),o=o||!1,o){var a=Inc.storage.getItem("token")||"";if(!a)return m("请先登录!");b("Usermain/baiduAudio",{token:a,text:n},(function(t){var e=t.data;if(0!=e.code)return m(e.msg);var o=new Audio;o.src=e.url;try{if("iOS"==plus.os.name){var a=plus.ios.importClass("AVAudioSession"),s=a.sharedInstance();s.setCategoryerror("AVAudioSessionCategoryPlayback",null),s.setActiveerror("YES",null);var i=plus.ios.importClass("AVSpeechSynthesizer"),r=plus.ios.importClass("AVSpeechUtterance"),u=plus.ios.import("AVSpeechSynthesisVoice"),c=new i,l=u.voiceWithLanguage("zh-CN"),d=r.speechUtteranceWithString(n);d.setVoice(l),c.speakUtterance(d)}else o.play()}catch(p){o.play()}}))}},O={self:null,msgRouter:function(t){"group"==t.type?this.msgGroup(t):"msg"==t.type?this.msg(t):"notify"==t.type&&this.msgNotify(t)},msgGroup:function(t){this.self.$store.state.uMsg.group=t.data;var e=this.self.$store.state.uMsg.group,o=0;for(var n in e)o+=e[n].num;this.self.$store.state.uMsg.num=o},msg:function(t){var e=g.getItem("voice");N(t.data.title,t.data.content,!!e);var o=t.data.uid==this.self.$store.state.uInfo.uid?t.data.fid:t.data.uid;this.self.$store.state.uMsg.group[""+o]?(this.self.$store.state.uMsg.group[""+o].msg.push(t.data),this.self.$store.state.uMsg.group[""+o].num++,this.self.$store.state.uMsg.num++):this.self.$store.state.socket.send(JSON.stringify({type:"group"}))},msgNotify:function(t){console.log(t)},start:function(t){var e=this;this.self=t,clearInterval(this.msgInterval),this.msgInterval=setInterval((function(){!e.self.$store.state.isLogin||e.self.$store.state.socket&&1==e.self.$store.state.socket.readyState||e.start(t)}),3e3);var o=g.getItem("token");if(!o)return!1;f["a"].socket.start&&this.socket(o)},socket:function(t){var e=this;this.self.$store.state.socket=new WebSocket(f["a"].socket.server+"?token="+t),this.self.$store.state.socket.onopen=function(){console.log("Socket开启"),clearInterval(e.heartbeat),e.heartbeat=setInterval((function(){try{e.self.$store.state.socket.send(JSON.stringify({type:""}))}catch(t){e._closeMsg()}}),1e4),setTimeout((function(){e.self.$store.state.socket.send(JSON.stringify({type:"group"}))}),1e3)},this.self.$store.state.socket.onclose=function(){console.log("Socket关闭"),e._closeMsg()},this.self.$store.state.socket.onmessage=function(t){var o=JSON.parse(t.data);if(0!=o.code)return m(o.msg);e.msgRouter(o)}},_closeMsg:function(){this.self.$store.state.socket&&(this.self.$store.state.socket.close(),this.self.$store.state.socket=null,this.self.$store.state.uMsg.group=[],this.self.$store.state.uMsg.num="")}},T={self:null,init:function(t){var e=this;this.self=t,k((function(){plus.screen.lockOrientation("portrait-primary"),plus.navigator.setStatusBarStyle("dark"),plus.navigator.setStatusBarBackground("#FFFFFF"),e.self.$store.state.statusBarHeight=plus.navigator.getStatusbarHeight(),setTimeout((function(){plus.navigator.closeSplashscreen()}),300),document.addEventListener("uistylechange",(function(){e.self.$store.state.mode=plus.navigator.getUiStyle()}),!1);var t=0;w((function(o){o.canBack?(e.self.$store.state.scan&&e.self.$store.state.scan.close(),Object(y["a"])(e.self,1)):(t>0&&plus.runtime.quit(),m("再按一次退出应用!"),t++,setTimeout((function(){t=0}),2e3))}))})),this.tokenState(1),clearInterval(this.tokenInterval),this.tokenInterval=setInterval((function(){e.tokenState(0)}),1e4),this.geoLocation(),O.start(this.self)},tokenState:function(t){var e=this,o=g.getItem("token");o?b("user/token",{token:o,uinfo:t},(function(t){var o=t.data;0==o.code?(e.self.$store.state.isLogin=!0,o.uinfo&&(e.self.$store.state.uInfo=o.uinfo)):(e.self.$store.state.isLogin=!1,e.self.$store.state.uInfo={},g.setItem("token",""))})):(this.self.$store.state.isLogin=!1,g.setItem("token",""))},geoLocation:function(){var t=this;setTimeout((function(){$((function(e){t.self.$store.state.geolocation=e,g.setItem("city",e.district)}),(function(t){m("获取定位失败!")}))}),1e3)}},F=(o("1276"),function(t,e){var o=t.split("."),n=e.split(".");return parseInt(o[0])<parseInt(n[0])||(parseInt(o[1])<parseInt(n[1])||parseInt(o[2])<parseInt(n[2]))}),L={data:function(){return{keepAlive:10,transitionName:"",update:{show:!1,os:"",down:!1,loading:"0%",msg:"检测更新",file:"",total:0},upDateColor:f["a"].update,msgInterval:null}},watch:{$route:function(t,e){this.transitionName=this.$router.isBack?"slide-right":"slide-left",this.$router.isBack=!1}},computed:{mode:function(){return this.$store.state.mode}},mounted:function(){T.init(this),f["a"].update.start&&this.isUpdate()},methods:{isUpdate:function(){var t=this;k((function(){t.update.os=plus.os.name,b("index/appUpdate",{os:t.update.os},(function(e){var o=e.data;if(0!=o.code)return!1;plus.runtime.getProperty(plus.runtime.appid,(function(e){if(!F(e.version,o.version))return!1;t.update.show=!0,t.update.down=!0,t.update.msg="新版本: "+o.version+"&nbsp;&nbsp;大小: "+(o.size/1024/1024).toFixed(2)+"MB",t.update.file=t.$config.baseUrl+o.file,t.update.total=o.size}))}))}))},updateDown:function(){var t=this;if(this.update.down=!1,this.update.msg="开始下载",this.update.loading="0%","iOS"==this.update.os)this.update.msg="请在桌面查看安装进度",window.open(f["a"].upIosUrl),setTimeout((function(){plus.runtime.quit()}),5e3);else{var e=plus.downloader.createDownload(this.update.file,{filename:"_doc/download/",timeout:30},(function(e,o){200==o?plus.runtime.install(e.filename,{force:!0},(function(){plus.runtime.restart()}),(function(t){m("安装失败!")})):(t.update.down=!0,t.update.msg="下载失败")}));e.start(),e.addEventListener("statechanged",(function(e,o){var n=parseInt(e.downloadedSize/t.update.total*100);t.update.loading=n+"%",t.update.msg="正在下载："+t.update.loading,n>=100&&(t.update.msg="下载完成，安装并重启")}))}}}},E=L,x=(o("034f"),o("1d2c"),o("2877")),D=Object(x["a"])(E,d,p,!1,null,"9a9b75a0",null),P=D.exports;document.title=f["a"].title,n["default"].config.productionTip=f["a"].dev,n["default"].prototype.$config=f["a"],new n["default"]({router:u,store:l,render:function(t){return t(P)}}).$mount("#app"),document.body.ontouchstart=function(){try{"iOS"!=plus.os.name&&document.createElement("audio")}catch(t){document.createElement("audio")}}},"85ec":function(t,e,o){},"8c89":function(t,e,o){"use strict";var n="WebMIS",a="https://demo-api.webmis.vip/",s="wss://demo-api.webmis.vip/wss";e["a"]={dev:!1,title:n,version:"1.0.0",baseUrl:a,apiUrl:a+"api/",copy:"Copyright © WebMIS.VIP 2020",request:{headers:{"Content-Type":"multipart/form-data"}},statusBar:{height:48,color:"#333",bgColor:"#FFF"},update:{start:!0,bg:"#6FB737",logoBg:"#FFF",loading:"#FFF",loaded:"#666",copy:"#333",butColor:"#666",butBg:"#FFF",butText:"下载并安装"},upIosUrl:"itms-apps://itunes.apple.com/cn/app/tao-bao-sui-shi-sui-xiang/id387682726?mt=8",amapKey:"d956f0c3e15489a1b5bf291e5d133c8a",baiduOcr:"https://aip.baidubce.com/rest/2.0/ocr/v1/",socket:{start:!1,server:s},msgContent:"content",msgBrowser:!1,wx_type:0,wx_id:"gh_a6ddccd2bb08"}},bf8a:function(t,e,o){"use strict";e["a"]=function(t,e,o){return o=o||"",t.$router.push({path:e,query:o})}},fbd7:function(t,e,o){"use strict";e["a"]=function(t,e){t.$router.goBack(-e)}}});