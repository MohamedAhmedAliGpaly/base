(function(t){function e(e){for(var n,s,i=e[0],u=e[1],c=e[2],l=0,d=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,s=1;s<o.length;s++){var i=o[s];0!==a[i]&&(n=!1)}n&&(r.splice(e--,1),t=u(u.s=o[0]))}return t}var n={},s={app:0},a={app:0},r=[];function i(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-1aa94d43":"3bcfc9a3","chunk-c02407ac":"586c9fb1","chunk-ee41c646":"9bee6a2c"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(t){var e=[],o={"chunk-1aa94d43":1,"chunk-c02407ac":1};s[t]?e.push(s[t]):0!==s[t]&&o[t]&&e.push(s[t]=new Promise((function(e,o){for(var n="css/"+({}[t]||t)+"."+{"chunk-1aa94d43":"ed6d487d","chunk-c02407ac":"b46d8283","chunk-ee41c646":"31d6cfe0"}[t]+".css",a=u.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var c=r[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===a))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],l=c.getAttribute("data-href");if(l===n||l===a)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||a,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete s[t],p.parentNode.removeChild(p),o(r)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){s[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,o){n=a[t]=[e,o]}));e.push(n[2]=r);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(p);var o=a[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",d.name="ChunkLoadError",d.type=n,d.request=s,o[1](d)}a[t]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,o){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(o,n,function(e){return t[e]}.bind(null,n));return o},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var p=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"56d7":function(t,e,o){"use strict";o.r(e);o("b0c0"),o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23"),s=Object(n["I"])("data-v-5aefd4d6");Object(n["u"])("data-v-5aefd4d6");var a={id:"app"},r={class:"update_ct verticalCenter"},i=Object(n["i"])("div",null,null,-1),u={class:"load_button"};Object(n["s"])();var c=s((function(t,e,o,c,l,d){var p=Object(n["z"])("router-view");return Object(n["r"])(),Object(n["f"])("div",a,[t.update.show?(Object(n["r"])(),Object(n["f"])("div",{key:0,class:"update_body",style:{backgroundColor:t.upDateColor.bg}},[Object(n["i"])("div",r,[Object(n["i"])("div",{class:"logo",style:{backgroundColor:t.upDateColor.logoBg}},[i],4),Object(n["i"])("div",{class:"loading",style:{backgroundImage:"linear-gradient(to right, "+t.upDateColor.loading+", "+t.upDateColor.loading+" "+t.update.loading+", "+t.upDateColor.loaded+" "+t.update.loading+", "+t.upDateColor.loaded+" 100%)"}},null,4),Object(n["i"])("div",{class:"load_msg",style:{color:t.upDateColor.msgColor}},Object(n["C"])(t.update.msg),5),Object(n["i"])("div",u,[t.update.down?(Object(n["r"])(),Object(n["f"])("button",{key:0,class:"Button",onClick:e[1]||(e[1]=function(e){return t.updateDown()}),style:{color:t.upDateColor.butColor,backgroundColor:t.upDateColor.butBg}},Object(n["C"])(t.upDateColor.butText),5)):Object(n["g"])("",!0)])]),Object(n["i"])("div",{class:"update_logo",style:{color:t.upDateColor.copy}},[Object(n["i"])("h1",null,Object(n["C"])(t.$config.title),1),Object(n["i"])("h2",null,Object(n["C"])(t.$config.copy),1)],4)],4)):Object(n["g"])("",!0),Object(n["i"])(p,null,{default:s((function(e){var o=e.Component;return[(Object(n["r"])(),Object(n["f"])(n["b"],{max:t.keepAlive},[Object(n["i"])(n["c"],{name:t.transitionName},{default:s((function(){return[(Object(n["r"])(),Object(n["f"])(Object(n["A"])(o),{class:["view","dark"==t.mode?"view_dark":""]},null,8,["class"]))]})),_:2},1032,["name"])],1032,["max"]))]})),_:1})])})),l=(o("b680"),o("8c89")),d=function(t,e){var o=document.createElement("div");o.setAttribute("class","wm-ui_toast"),o.innerHTML="<span>"+t+"</span>",document.body.appendChild(o),setTimeout((function(){o.style.opacity="1",o.style.top="10%"}),100),e=e||3e3,setTimeout((function(){document.body.removeChild(o)}),e)},p={setItem:function(t,e){return window.localStorage.setItem(t,e)},getItem:function(t){return window.localStorage.getItem(t)},clear:function(){return window.localStorage.clear()}},f=o("bc3a"),g=o.n(f),m=function(t,e,o,n,s){var a=t.substr(0,4);t="http"==a?t:l["a"].apiUrl+t;var r=new FormData;for(var i in e)r.append(i,e[i]);var u=l["a"].request;for(var c in s=s||{},u)s[c]=u[c];g.a.post(t,r,s).then(o).catch(n)},h=o("fbd7"),v=function(t){document.addEventListener("plusready",t,!1)},b=function(t){try{var e=plus.webview.currentWebview();plus.key.addEventListener("backbutton",(function(){e.canBack(t)}))}catch(o){return d("Android返回键")}},y=function t(e,o){try{plus.geolocation.getCurrentPosition((function(t){var o={longitude:t.coords.longitude,latitude:t.coords.latitude,province:t.address.province,city:t.address.city,district:t.address.district,street:t.address.street,streetnum:t.address.streetNum,poiname:t.address.poiName,address:t.address.poiName+t.address.streetNum};p.setItem("geolocation",JSON.stringify(o)),e(o)}),o)}catch(n){try{AMap.service("AMap.Geolocation",(function(){var t=new AMap.Geolocation({enableHighAccuracy:!1,timeout:5e3});t.getCurrentPosition((function(t,o){if(o&&o.position){var n={longitude:o.position.lng,latitude:o.position.lat,province:o.addressComponent.province,city:o.addressComponent.city,district:o.addressComponent.district,street:o.addressComponent.street,streetnum:o.addressComponent.streetNumber,poiname:o.addressComponent.township,address:o.addressComponent.township+o.addressComponent.streetNumber};p.setItem("geolocation",JSON.stringify(n)),e(n)}}))}))}catch(n){setTimeout((function(){t(e,o)}),3e3)}}},k=y,w=function(t,e,o){Inc.config.msg.browser&&window.Notification&&"denied"!==Notification.permission&&Notification.requestPermission((function(o){new Notification(t,{body:e})}));var n="title"==Inc.config.msg.content?t:e;if(d(n),o=o||!1,o){var s=Inc.storage.getItem("token")||"";if(!s)return d("请先登录!");m("Usermain/baiduAudio",{token:s,text:n},(function(t){var e=t.data;if(0!=e.code)return d(e.msg);var o=new Audio;o.src=e.url;try{if("iOS"==plus.os.name){var s=plus.ios.importClass("AVAudioSession"),a=s.sharedInstance();a.setCategoryerror("AVAudioSessionCategoryPlayback",null),a.setActiveerror("YES",null);var r=plus.ios.importClass("AVSpeechSynthesizer"),i=plus.ios.importClass("AVSpeechUtterance"),u=plus.ios.import("AVSpeechSynthesisVoice"),c=new r,l=u.voiceWithLanguage("zh-CN"),p=i.speechUtteranceWithString(n);p.setVoice(l),c.speakUtterance(p)}else o.play()}catch(f){o.play()}}))}},O={self:null,msgRouter:function(t){"group"==t.type?this.msgGroup(t):"msg"==t.type?this.msg(t):"notify"==t.type&&this.msgNotify(t)},msgGroup:function(t){this.self.$store.state.uMsg.group=t.data;var e=this.self.$store.state.uMsg.group,o=0;for(var n in e)o+=e[n].num;this.self.$store.state.uMsg.num=o},msg:function(t){var e=p.getItem("voice");w(t.data.title,t.data.content,!!e);var o=t.data.uid==this.self.$store.state.uInfo.uid?t.data.fid:t.data.uid;this.self.$store.state.uMsg.group[""+o]?(this.self.$store.state.uMsg.group[""+o].msg.push(t.data),this.self.$store.state.uMsg.group[""+o].num++,this.self.$store.state.uMsg.num++):this.self.$store.state.socket.send(JSON.stringify({type:"group"}))},msgNotify:function(t){console.log(t)},start:function(t){var e=this;this.self=t,clearInterval(this.socketInterval),this.socketInterval=setInterval((function(){!e.self.$store.state.isLogin||e.self.$store.state.socket&&1==e.self.$store.state.socket.readyState||e.start(t)}),3e3);var o=p.getItem("token");if(!o)return!1;l["a"].socket.start&&this.socket(o)},socket:function(t){var e=this;this.self.$store.state.socket=new WebSocket(l["a"].socket.server+"?token="+t),this.self.$store.state.socket.onopen=function(){console.log("Socket开启"),clearInterval(e.heartbeat),e.heartbeat=setInterval((function(){try{e.self.$store.state.socket.send(JSON.stringify({type:""}))}catch(t){e._closeMsg()}}),1e4),setTimeout((function(){e.self.$store.state.socket.send(JSON.stringify({type:"group"}))}),1e3)},this.self.$store.state.socket.onclose=function(){console.log("Socket关闭"),e._closeMsg()},this.self.$store.state.socket.onmessage=function(t){var o=JSON.parse(t.data);if(0!=o.code)return d(o.msg);e.msgRouter(o)}},_closeMsg:function(){this.self.$store.state.socket&&(this.self.$store.state.socket.close(),this.self.$store.state.socket=null,this.self.$store.state.uMsg.group=[],this.self.$store.state.uMsg.num="")}},C={self:null,init:function(t){var e=this;this.self=t,v((function(){plus.screen.lockOrientation("portrait-primary"),plus.navigator.setStatusBarStyle("dark"),plus.navigator.setStatusBarBackground("#FFFFFF"),e.self.$store.state.statusBarHeight=plus.navigator.getStatusbarHeight(),setTimeout((function(){plus.navigator.closeSplashscreen()}),300),document.addEventListener("uistylechange",(function(){e.self.$store.state.mode=plus.navigator.getUiStyle()}),!1);var t=0;b((function(o){o.canBack?(e.self.$store.state.scan&&e.self.$store.state.scan.close(),Object(h["a"])(e.self,1)):(t>0&&plus.runtime.quit(),d("再按一次退出应用!"),t++,setTimeout((function(){t=0}),2e3))}))})),l["a"].login.start&&(this.tokenState(1),clearInterval(this.tokenInterval),this.tokenInterval=setInterval((function(){e.tokenState(0)}),1e4)),l["a"].amap.start&&this.geoLocation(),l["a"].socket.start&&O.start(this.self)},tokenState:function(t){var e=this,o=p.getItem("token");o?m(l["a"].login.api,{token:o,uinfo:t},(function(t){var o=t.data;0==o.code?(e.self.$store.state.isLogin=!0,o[l["a"].login.uinfo]&&(e.self.$store.state.uInfo=o[l["a"].login.uinfo])):(e.self.$store.state.isLogin=!1,e.self.$store.state.uInfo={},p.setItem("token",""))})):(this.self.$store.state.isLogin=!1,p.setItem("token",""))},geoLocation:function(){var t=this;setTimeout((function(){k((function(e){t.self.$store.state.geolocation=e,p.setItem("city",e.district)}),(function(t){d("获取定位失败!")}))}),1e3)}},j=(o("ac1f"),o("1276"),function(t,e){var o=t.split("."),n=e.split(".");return parseInt(o[0])<parseInt(n[0])||(parseInt(o[1])<parseInt(n[1])||parseInt(o[2])<parseInt(n[2]))}),I={data:function(){return{keepAlive:10,transitionName:"",update:{show:!1,os:"",down:!1,loading:"0%",msg:"检测更新",file:"",total:0},upDateColor:l["a"].update,msgInterval:null}},watch:{$route:function(t,e){"/"==t.path&&"/"==e.path||(this.transitionName=this.$router.isBack?"slide-right":"slide-left",this.$router.isBack=!1)}},computed:{mode:function(){return this.$store.state.mode}},mounted:function(){C.init(this),l["a"].update.start&&this.isUpdate()},methods:{isUpdate:function(){var t=this;v((function(){t.update.os=plus.os.name,m("index/appUpdate",{os:t.update.os},(function(e){var o=e.data;if(0!=o.code)return!1;plus.runtime.getProperty(plus.runtime.appid,(function(e){if(!j(e.version,o.version))return!1;t.update.show=!0,t.update.down=!0,t.update.msg="新版本: "+o.version+"&nbsp;&nbsp;大小: "+(o.size/1024/1024).toFixed(2)+"MB",t.update.file=t.$config.baseUrl+o.file,t.update.total=o.size}))}))}))},updateDown:function(){var t=this;if(this.update.down=!1,this.update.msg="开始下载",this.update.loading="0%","iOS"==this.update.os)this.update.msg="请在桌面查看安装进度",window.open(l["a"].upIosUrl),setTimeout((function(){plus.runtime.quit()}),5e3);else{var e=plus.downloader.createDownload(this.update.file,{filename:"_doc/download/",timeout:30},(function(e,o){200==o?plus.runtime.install(e.filename,{force:!0},(function(){plus.runtime.restart()}),(function(t){d("安装失败!")})):(t.update.down=!0,t.update.msg="下载失败")}));e.start(),e.addEventListener("statechanged",(function(e,o){var n=parseInt(e.downloadedSize/t.update.total*100);t.update.loading=n+"%",t.update.msg="正在下载："+t.update.loading,n>=100&&(t.update.msg="下载完成，安装并重启")}))}}}};o("64be"),o("f0a9");I.render=c,I.__scopeId="data-v-5aefd4d6";var S=I,$=(o("d3b7"),o("6c02")),A=[{path:"/",name:"index",meta:{keepAlive:!0},component:function(){return o.e("chunk-c02407ac").then(o.bind(null,"d504"))}},{path:"/refresh",name:"Refresh",meta:{keepAlive:!1},component:function(){return o.e("chunk-ee41c646").then(o.bind(null,"ea97"))}},{path:"/demo",name:"Demo",meta:{keepAlive:!1},component:function(){return o.e("chunk-1aa94d43").then(o.bind(null,"c876"))}}],N=Object($["a"])({history:Object($["b"])(""),routes:A});N.goBack=function(t){this.isBack=!0,this.go(t)};var _=N,F=o("5502"),B=Object(F["a"])({state:{mode:"light",statusBarHeight:0,isLogin:"",uInfo:{},geolocation:{},socket:null,uMsg:{scroll:null,group:[],num:""},uNotify:{},scan:null},mutations:{},actions:{},modules:{}});document.title=l["a"].title,Object(n["e"])(S).use(B).use(_).mount("#app"),document.body.ontouchstart=function(){try{"iOS"!=plus.os.name&&document.createElement("audio")}catch(t){document.createElement("audio")}}},"64be":function(t,e,o){"use strict";o("c894")},"8c89":function(t,e,o){"use strict";var n="WebMIS-VueAPP",s="https://demo-api.webmis.vip/",a="wss://demo-api.webmis.vip/wss";e["a"]={dev:!1,title:n,version:"1.0.0",baseUrl:s,apiUrl:s+"api/",copy:"Copyright © WebMIS.VIP 2020",request:{headers:{"Content-Type":"multipart/form-data"}},statusBar:{height:48,color:"#333",bgColor:"#FFF"},update:{start:!0,bg:"#24292E",logoBg:"#FFFFFF",loading:"#6FB737",loaded:"#000000",copy:"#666666",msgColor:"#999999",butColor:"#FFFFFF",butBg:"#6FB737",butText:"下载并安装"},upIosUrl:"itms-apps://itunes.apple.com/cn/app/tao-bao-sui-shi-sui-xiang/id387682726?mt=8",login:{start:!0,api:"user/token",uinfo:"uinfo"},amap:{start:!0,jsapi_key:"d956f0c3e15489a1b5bf291e5d133c8a"},socket:{start:!1,server:a},msgContent:"content",msgBrowser:!1,wx_type:0,wx_id:"gh_a6ddccd2bb08"}},"902e":function(t,e,o){},c894:function(t,e,o){},f0a9:function(t,e,o){"use strict";o("902e")},fbd7:function(t,e,o){"use strict";e["a"]=function(t,e){t.$router.goBack(-e)}}});